<!DOCTYPE html>
<html lang="en-us" dir="ltr">
<head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script>
  <!--
Made with Book Theme
https://github.com/alex-shpak/hugo-book
-->

<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="description" content="中缀表达式#中缀表达式就是我们通常所写的表达式,如:1&#43;2*3、1&#43;(2&#43;3)*4-5、1&#43;2*(3&#43;4*(5&#43;6)) 等等。
后缀表达式及其求值方法#后缀表达式又称为逆波兰表达式,它的特点是运算符在操作数的后面,如:123*&#43;、123&#43;4*&#43;5-、123456&#43;*&#43;*&#43; 等等。
后缀表达式的求值方法#后缀表达式的求值方法是:从左到右遍历表达式的每个数字和符号,遇到是数字就进栈,遇到是符号,就将处于栈顶两个数字出栈,进行运算,运算结果进栈,一直到最终获得结果。
例如:123*&#43; 的求值过程如下:
读入字符 当前栈 说明 1 1 读入 1,进栈 2 1 2 读入 2,进栈 3 1 2 3 读入 3,进栈 * 1 6 读入 *,出栈 3 和 2,计算 2 * 3 = 6,将 6 进栈 &#43; 7 读入 &#43;,出栈 6 和 1,计算 1 &#43; 6 = 7,将 7 进栈 C&#43;&#43; 实现后缀表达式的求值#用C&#43;&#43;实现后缀表达式的求值。要求有简单的控制台UI,并且要对用户的危险行为进行检查和警告。控制台输出的语句要求是中英文对照,并且在用户进行错误操作的时候告知他进行了什么错误操作。
#include &lt;iostream&gt; #include &lt;stack&gt; #include &lt;string&gt; #include &lt;sstream&gt; #include &lt;cctype&gt; using namespace std; // 函数声明 bool isOperator(char c); double performOperation(char op, double operand1, double operand2); bool evaluatePostfixExpression(const string&amp; postfix, double&amp; result); int main() { cout &lt;&lt; &#34;欢迎使用后缀表达式计算器!&#34; &lt;&lt; endl; cout &lt;&lt; &#34;请输入一个后缀表达式,使用空格分隔操作数和操作符,输入&#39;q&#39;退出:&#34; &lt;&lt; endl; while (true) { string input; getline(cin, input); if (input == &#34;q&#34;) { cout &lt;&lt; &#34;感谢使用后缀表达式计算器,再见!&#34; &lt;&lt; endl; break; } // 检查输入中的非法字符 bool validInput = true; for (char c : input) { if (!isspace(c) &amp;&amp; !isdigit(c) &amp;&amp; !isOperator(c)) { validInput = false; cout &lt;&lt; &#34;错误:输入包含非法字符 &#39;&#34; &lt;&lt; c &lt;&lt; &#34;&#39;&#34; &lt;&lt; endl; break; } } if (validInput) { double result; if (evaluatePostfixExpression(input, result)) { cout &lt;&lt; &#34;结果: &#34; &lt;&lt; result &lt;&lt; endl; } else { cout &lt;&lt; &#34;错误:无效的后缀表达式&#34; &lt;&lt; endl; } } cout &lt;&lt; &#34;请输入另一个后缀表达式,或输入&#39;q&#39;退出:&#34; &lt;&lt; endl; } return 0; } bool isOperator(char c) { return c == &#39;&#43;&#39; || c == &#39;-&#39; || c == &#39;*&#39; || c == &#39;/&#39;; } double performOperation(char op, double operand1, double operand2) { switch (op) { case &#39;&#43;&#39;: return operand1 &#43; operand2; case &#39;-&#39;: return operand1 - operand2; case &#39;*&#39;: return operand1 * operand2; case &#39;/&#39;: if (operand2 != 0) { return operand1 / operand2; } else { cout &lt;&lt; &#34;错误:除数不能为零&#34; &lt;&lt; endl; exit(1); } default: cout &lt;&lt; &#34;错误:未知的操作符 &#39;&#34; &lt;&lt; op &lt;&lt; &#34;&#39;&#34; &lt;&lt; endl; exit(1); } } bool evaluatePostfixExpression(const string&amp; postfix, double&amp; result) { stack&lt;double&gt; operandStack; istringstream iss(postfix); string token; while (iss &gt;&gt; token) { if (isdigit(token[0])) { double operand = stod(token); operandStack.push(operand); } else if (isOperator(token[0])) { if (operandStack.size() &lt; 2) { cout &lt;&lt; &#34;错误:操作数不足&#34; &lt;&lt; endl; return false; } double operand2 = operandStack.top(); operandStack.pop(); double operand1 = operandStack.top(); operandStack.pop(); double result = performOperation(token[0], operand1, operand2); operandStack.push(result); } else { cout &lt;&lt; &#34;错误:无效的标记 &#39;&#34; &lt;&lt; token &lt;&lt; &#34;&#39;&#34; &lt;&lt; endl; return false; } } if (operandStack.size() == 1) { result = operandStack.top(); return true; } else { cout &lt;&lt; &#34;错误:操作数不足或操作符过多&#34; &lt;&lt; endl; return false; } }C 实现后缀表达式的求值##include &lt;stdio.h&gt; #include &lt;stdlib.h&gt; #include &lt;string.h&gt; #include &lt;ctype.h&gt; #define MAX_STACK_SIZE 100 #pragma warning(disable : 4996) // 栈结构和操作 typedef struct { double data[MAX_STACK_SIZE]; int top; } Stack; void initialize(Stack* stack) { stack-&gt;top = -1; } int isEmpty(Stack* stack) { return stack-&gt;top == -1; } void push(Stack* stack, double value) { if (stack-&gt;top &lt; MAX_STACK_SIZE - 1) { stack-&gt;data[&#43;&#43;stack-&gt;top] = value; } else { printf(&#34;错误:栈已满\n&#34;); exit(1); } } double pop(Stack* stack) { if (!isEmpty(stack)) { return stack-&gt;data[stack-&gt;top--]; } else { printf(&#34;错误:栈为空\n&#34;); exit(1); } } // 函数声明 int isOperator(char c); double performOperation(char op, double operand1, double operand2); int evaluatePostfixExpression(const char* postfix, double* result); int main() { printf(&#34;欢迎使用后缀表达式计算器!\n&#34;); printf(&#34;请输入一个后缀表达式,使用空格分隔操作数和操作符,输入&#39;q&#39;退出:\n&#34;); while (1) { char input[100]; fgets(input, sizeof(input), stdin); input[strcspn(input, &#34;\n&#34;)] = &#39;\0&#39;; // 去掉换行符 if (strcmp(input, &#34;q&#34;) == 0) { printf(&#34;感谢使用后缀表达式计算器,再见!\n&#34;); break; } // 检查输入中的非法字符 int validInput = 1; for (int i = 0; input[i] != &#39;\0&#39;; i&#43;&#43;) { if (!isspace(input[i]) &amp;&amp; !isdigit(input[i]) &amp;&amp; !isOperator(input[i])) { validInput = 0; printf(&#34;错误:输入包含非法字符 &#39;%c&#39;\n&#34;, input[i]); break; } } if (validInput) { double result; if (evaluatePostfixExpression(input, &amp;result)) { printf(&#34;结果: %g\n&#34;, result); } else { printf(&#34;错误:无效的后缀表达式\n&#34;); } } printf(&#34;请输入另一个后缀表达式,或输入&#39;q&#39;退出:\n&#34;); } return 0; } int isOperator(char c) { return c == &#39;&#43;&#39; || c == &#39;-&#39; || c == &#39;*&#39; || c == &#39;/&#39;; } double performOperation(char op, double operand1, double operand2) { switch (op) { case &#39;&#43;&#39;: return operand1 &#43; operand2; case &#39;-&#39;: return operand1 - operand2; case &#39;*&#39;: return operand1 * operand2; case &#39;/&#39;: if (operand2 != 0) { return operand1 / operand2; } else { printf(&#34;错误:除数不能为零\n&#34;); exit(1); } default: printf(&#34;错误:未知的操作符 &#39;%c&#39;\n&#34;, op); exit(1); } } int evaluatePostfixExpression(const char* postfix, double* result) { Stack operandStack; initialize(&amp;operandStack); char* token = strtok((char*)postfix, &#34; &#34;); while (token != NULL) { if (isdigit(token[0])) { double operand = atof(token); push(&amp;operandStack, operand); } else if (isOperator(token[0])) { if (operandStack.top &lt; 1) { printf(&#34;错误:操作数不足\n&#34;); return 0; } double operand2 = pop(&amp;operandStack); double operand1 = pop(&amp;operandStack); double result = performOperation(token[0], operand1, operand2); push(&amp;operandStack, result); } else { printf(&#34;错误:无效的标记 &#39;%s&#39;\n&#34;, token); return 0; } token = strtok(NULL, &#34; &#34;); } if (operandStack.top == 0) { *result = operandStack.data[0]; return 1; } else { printf(&#34;错误:操作数不足或操作符过多\n&#34;); return 0; } }后缀表达式的转换方法(中缀转后缀)#将中缀表达式转换为后缀表达式的方法是:从左到右遍历中缀表达式的每个数字和符号,若是数字就输出,若是符号,则判断其与栈顶符号的优先级,是右括号或优先级不高于栈顶符号(乘除优先加减)则栈顶元素依次出栈并输出,并将当前符号进栈,一直到最终输出后缀表达式为止。
">
<meta name="theme-color" media="(prefers-color-scheme: light)" content="#ffffff">
<meta name="theme-color" media="(prefers-color-scheme: dark)" content="#343a40">
<meta name="color-scheme" content="light dark"><meta property="og:url" content="http://localhost:1313/docs/archive_posts/prefix_infix_postfix_expr/">
  <meta property="og:site_name" content="rdququ&#39;s Blog">
  <meta property="og:title" content="前缀、后缀，中缀表达式">
  <meta property="og:description" content="中缀表达式#中缀表达式就是我们通常所写的表达式,如:1&#43;2*3、1&#43;(2&#43;3)*4-5、1&#43;2*(3&#43;4*(5&#43;6)) 等等。
后缀表达式及其求值方法#后缀表达式又称为逆波兰表达式,它的特点是运算符在操作数的后面,如:123*&#43;、123&#43;4*&#43;5-、123456&#43;*&#43;*&#43; 等等。
后缀表达式的求值方法#后缀表达式的求值方法是:从左到右遍历表达式的每个数字和符号,遇到是数字就进栈,遇到是符号,就将处于栈顶两个数字出栈,进行运算,运算结果进栈,一直到最终获得结果。
例如:123*&#43; 的求值过程如下:
读入字符 当前栈 说明 1 1 读入 1,进栈 2 1 2 读入 2,进栈 3 1 2 3 读入 3,进栈 * 1 6 读入 *,出栈 3 和 2,计算 2 * 3 = 6,将 6 进栈 &#43; 7 读入 &#43;,出栈 6 和 1,计算 1 &#43; 6 = 7,将 7 进栈 C&#43;&#43; 实现后缀表达式的求值#用C&#43;&#43;实现后缀表达式的求值。要求有简单的控制台UI,并且要对用户的危险行为进行检查和警告。控制台输出的语句要求是中英文对照,并且在用户进行错误操作的时候告知他进行了什么错误操作。
#include &lt;iostream&gt; #include &lt;stack&gt; #include &lt;string&gt; #include &lt;sstream&gt; #include &lt;cctype&gt; using namespace std; // 函数声明 bool isOperator(char c); double performOperation(char op, double operand1, double operand2); bool evaluatePostfixExpression(const string&amp; postfix, double&amp; result); int main() { cout &lt;&lt; &#34;欢迎使用后缀表达式计算器!&#34; &lt;&lt; endl; cout &lt;&lt; &#34;请输入一个后缀表达式,使用空格分隔操作数和操作符,输入&#39;q&#39;退出:&#34; &lt;&lt; endl; while (true) { string input; getline(cin, input); if (input == &#34;q&#34;) { cout &lt;&lt; &#34;感谢使用后缀表达式计算器,再见!&#34; &lt;&lt; endl; break; } // 检查输入中的非法字符 bool validInput = true; for (char c : input) { if (!isspace(c) &amp;&amp; !isdigit(c) &amp;&amp; !isOperator(c)) { validInput = false; cout &lt;&lt; &#34;错误:输入包含非法字符 &#39;&#34; &lt;&lt; c &lt;&lt; &#34;&#39;&#34; &lt;&lt; endl; break; } } if (validInput) { double result; if (evaluatePostfixExpression(input, result)) { cout &lt;&lt; &#34;结果: &#34; &lt;&lt; result &lt;&lt; endl; } else { cout &lt;&lt; &#34;错误:无效的后缀表达式&#34; &lt;&lt; endl; } } cout &lt;&lt; &#34;请输入另一个后缀表达式,或输入&#39;q&#39;退出:&#34; &lt;&lt; endl; } return 0; } bool isOperator(char c) { return c == &#39;&#43;&#39; || c == &#39;-&#39; || c == &#39;*&#39; || c == &#39;/&#39;; } double performOperation(char op, double operand1, double operand2) { switch (op) { case &#39;&#43;&#39;: return operand1 &#43; operand2; case &#39;-&#39;: return operand1 - operand2; case &#39;*&#39;: return operand1 * operand2; case &#39;/&#39;: if (operand2 != 0) { return operand1 / operand2; } else { cout &lt;&lt; &#34;错误:除数不能为零&#34; &lt;&lt; endl; exit(1); } default: cout &lt;&lt; &#34;错误:未知的操作符 &#39;&#34; &lt;&lt; op &lt;&lt; &#34;&#39;&#34; &lt;&lt; endl; exit(1); } } bool evaluatePostfixExpression(const string&amp; postfix, double&amp; result) { stack&lt;double&gt; operandStack; istringstream iss(postfix); string token; while (iss &gt;&gt; token) { if (isdigit(token[0])) { double operand = stod(token); operandStack.push(operand); } else if (isOperator(token[0])) { if (operandStack.size() &lt; 2) { cout &lt;&lt; &#34;错误:操作数不足&#34; &lt;&lt; endl; return false; } double operand2 = operandStack.top(); operandStack.pop(); double operand1 = operandStack.top(); operandStack.pop(); double result = performOperation(token[0], operand1, operand2); operandStack.push(result); } else { cout &lt;&lt; &#34;错误:无效的标记 &#39;&#34; &lt;&lt; token &lt;&lt; &#34;&#39;&#34; &lt;&lt; endl; return false; } } if (operandStack.size() == 1) { result = operandStack.top(); return true; } else { cout &lt;&lt; &#34;错误:操作数不足或操作符过多&#34; &lt;&lt; endl; return false; } }C 实现后缀表达式的求值##include &lt;stdio.h&gt; #include &lt;stdlib.h&gt; #include &lt;string.h&gt; #include &lt;ctype.h&gt; #define MAX_STACK_SIZE 100 #pragma warning(disable : 4996) // 栈结构和操作 typedef struct { double data[MAX_STACK_SIZE]; int top; } Stack; void initialize(Stack* stack) { stack-&gt;top = -1; } int isEmpty(Stack* stack) { return stack-&gt;top == -1; } void push(Stack* stack, double value) { if (stack-&gt;top &lt; MAX_STACK_SIZE - 1) { stack-&gt;data[&#43;&#43;stack-&gt;top] = value; } else { printf(&#34;错误:栈已满\n&#34;); exit(1); } } double pop(Stack* stack) { if (!isEmpty(stack)) { return stack-&gt;data[stack-&gt;top--]; } else { printf(&#34;错误:栈为空\n&#34;); exit(1); } } // 函数声明 int isOperator(char c); double performOperation(char op, double operand1, double operand2); int evaluatePostfixExpression(const char* postfix, double* result); int main() { printf(&#34;欢迎使用后缀表达式计算器!\n&#34;); printf(&#34;请输入一个后缀表达式,使用空格分隔操作数和操作符,输入&#39;q&#39;退出:\n&#34;); while (1) { char input[100]; fgets(input, sizeof(input), stdin); input[strcspn(input, &#34;\n&#34;)] = &#39;\0&#39;; // 去掉换行符 if (strcmp(input, &#34;q&#34;) == 0) { printf(&#34;感谢使用后缀表达式计算器,再见!\n&#34;); break; } // 检查输入中的非法字符 int validInput = 1; for (int i = 0; input[i] != &#39;\0&#39;; i&#43;&#43;) { if (!isspace(input[i]) &amp;&amp; !isdigit(input[i]) &amp;&amp; !isOperator(input[i])) { validInput = 0; printf(&#34;错误:输入包含非法字符 &#39;%c&#39;\n&#34;, input[i]); break; } } if (validInput) { double result; if (evaluatePostfixExpression(input, &amp;result)) { printf(&#34;结果: %g\n&#34;, result); } else { printf(&#34;错误:无效的后缀表达式\n&#34;); } } printf(&#34;请输入另一个后缀表达式,或输入&#39;q&#39;退出:\n&#34;); } return 0; } int isOperator(char c) { return c == &#39;&#43;&#39; || c == &#39;-&#39; || c == &#39;*&#39; || c == &#39;/&#39;; } double performOperation(char op, double operand1, double operand2) { switch (op) { case &#39;&#43;&#39;: return operand1 &#43; operand2; case &#39;-&#39;: return operand1 - operand2; case &#39;*&#39;: return operand1 * operand2; case &#39;/&#39;: if (operand2 != 0) { return operand1 / operand2; } else { printf(&#34;错误:除数不能为零\n&#34;); exit(1); } default: printf(&#34;错误:未知的操作符 &#39;%c&#39;\n&#34;, op); exit(1); } } int evaluatePostfixExpression(const char* postfix, double* result) { Stack operandStack; initialize(&amp;operandStack); char* token = strtok((char*)postfix, &#34; &#34;); while (token != NULL) { if (isdigit(token[0])) { double operand = atof(token); push(&amp;operandStack, operand); } else if (isOperator(token[0])) { if (operandStack.top &lt; 1) { printf(&#34;错误:操作数不足\n&#34;); return 0; } double operand2 = pop(&amp;operandStack); double operand1 = pop(&amp;operandStack); double result = performOperation(token[0], operand1, operand2); push(&amp;operandStack, result); } else { printf(&#34;错误:无效的标记 &#39;%s&#39;\n&#34;, token); return 0; } token = strtok(NULL, &#34; &#34;); } if (operandStack.top == 0) { *result = operandStack.data[0]; return 1; } else { printf(&#34;错误:操作数不足或操作符过多\n&#34;); return 0; } }后缀表达式的转换方法(中缀转后缀)#将中缀表达式转换为后缀表达式的方法是:从左到右遍历中缀表达式的每个数字和符号,若是数字就输出,若是符号,则判断其与栈顶符号的优先级,是右括号或优先级不高于栈顶符号(乘除优先加减)则栈顶元素依次出栈并输出,并将当前符号进栈,一直到最终输出后缀表达式为止。">
  <meta property="og:locale" content="en_us">
  <meta property="og:type" content="article">
    <meta property="article:section" content="docs">
    <meta property="article:published_time" content="2023-10-23T00:00:00+00:00">
    <meta property="article:modified_time" content="2023-10-23T00:00:00+00:00">
    <meta property="article:tag" content="数据结构">


  <meta itemprop="name" content="前缀、后缀，中缀表达式">
  <meta itemprop="description" content="中缀表达式#中缀表达式就是我们通常所写的表达式,如:1&#43;2*3、1&#43;(2&#43;3)*4-5、1&#43;2*(3&#43;4*(5&#43;6)) 等等。
后缀表达式及其求值方法#后缀表达式又称为逆波兰表达式,它的特点是运算符在操作数的后面,如:123*&#43;、123&#43;4*&#43;5-、123456&#43;*&#43;*&#43; 等等。
后缀表达式的求值方法#后缀表达式的求值方法是:从左到右遍历表达式的每个数字和符号,遇到是数字就进栈,遇到是符号,就将处于栈顶两个数字出栈,进行运算,运算结果进栈,一直到最终获得结果。
例如:123*&#43; 的求值过程如下:
读入字符 当前栈 说明 1 1 读入 1,进栈 2 1 2 读入 2,进栈 3 1 2 3 读入 3,进栈 * 1 6 读入 *,出栈 3 和 2,计算 2 * 3 = 6,将 6 进栈 &#43; 7 读入 &#43;,出栈 6 和 1,计算 1 &#43; 6 = 7,将 7 进栈 C&#43;&#43; 实现后缀表达式的求值#用C&#43;&#43;实现后缀表达式的求值。要求有简单的控制台UI,并且要对用户的危险行为进行检查和警告。控制台输出的语句要求是中英文对照,并且在用户进行错误操作的时候告知他进行了什么错误操作。
#include &lt;iostream&gt; #include &lt;stack&gt; #include &lt;string&gt; #include &lt;sstream&gt; #include &lt;cctype&gt; using namespace std; // 函数声明 bool isOperator(char c); double performOperation(char op, double operand1, double operand2); bool evaluatePostfixExpression(const string&amp; postfix, double&amp; result); int main() { cout &lt;&lt; &#34;欢迎使用后缀表达式计算器!&#34; &lt;&lt; endl; cout &lt;&lt; &#34;请输入一个后缀表达式,使用空格分隔操作数和操作符,输入&#39;q&#39;退出:&#34; &lt;&lt; endl; while (true) { string input; getline(cin, input); if (input == &#34;q&#34;) { cout &lt;&lt; &#34;感谢使用后缀表达式计算器,再见!&#34; &lt;&lt; endl; break; } // 检查输入中的非法字符 bool validInput = true; for (char c : input) { if (!isspace(c) &amp;&amp; !isdigit(c) &amp;&amp; !isOperator(c)) { validInput = false; cout &lt;&lt; &#34;错误:输入包含非法字符 &#39;&#34; &lt;&lt; c &lt;&lt; &#34;&#39;&#34; &lt;&lt; endl; break; } } if (validInput) { double result; if (evaluatePostfixExpression(input, result)) { cout &lt;&lt; &#34;结果: &#34; &lt;&lt; result &lt;&lt; endl; } else { cout &lt;&lt; &#34;错误:无效的后缀表达式&#34; &lt;&lt; endl; } } cout &lt;&lt; &#34;请输入另一个后缀表达式,或输入&#39;q&#39;退出:&#34; &lt;&lt; endl; } return 0; } bool isOperator(char c) { return c == &#39;&#43;&#39; || c == &#39;-&#39; || c == &#39;*&#39; || c == &#39;/&#39;; } double performOperation(char op, double operand1, double operand2) { switch (op) { case &#39;&#43;&#39;: return operand1 &#43; operand2; case &#39;-&#39;: return operand1 - operand2; case &#39;*&#39;: return operand1 * operand2; case &#39;/&#39;: if (operand2 != 0) { return operand1 / operand2; } else { cout &lt;&lt; &#34;错误:除数不能为零&#34; &lt;&lt; endl; exit(1); } default: cout &lt;&lt; &#34;错误:未知的操作符 &#39;&#34; &lt;&lt; op &lt;&lt; &#34;&#39;&#34; &lt;&lt; endl; exit(1); } } bool evaluatePostfixExpression(const string&amp; postfix, double&amp; result) { stack&lt;double&gt; operandStack; istringstream iss(postfix); string token; while (iss &gt;&gt; token) { if (isdigit(token[0])) { double operand = stod(token); operandStack.push(operand); } else if (isOperator(token[0])) { if (operandStack.size() &lt; 2) { cout &lt;&lt; &#34;错误:操作数不足&#34; &lt;&lt; endl; return false; } double operand2 = operandStack.top(); operandStack.pop(); double operand1 = operandStack.top(); operandStack.pop(); double result = performOperation(token[0], operand1, operand2); operandStack.push(result); } else { cout &lt;&lt; &#34;错误:无效的标记 &#39;&#34; &lt;&lt; token &lt;&lt; &#34;&#39;&#34; &lt;&lt; endl; return false; } } if (operandStack.size() == 1) { result = operandStack.top(); return true; } else { cout &lt;&lt; &#34;错误:操作数不足或操作符过多&#34; &lt;&lt; endl; return false; } }C 实现后缀表达式的求值##include &lt;stdio.h&gt; #include &lt;stdlib.h&gt; #include &lt;string.h&gt; #include &lt;ctype.h&gt; #define MAX_STACK_SIZE 100 #pragma warning(disable : 4996) // 栈结构和操作 typedef struct { double data[MAX_STACK_SIZE]; int top; } Stack; void initialize(Stack* stack) { stack-&gt;top = -1; } int isEmpty(Stack* stack) { return stack-&gt;top == -1; } void push(Stack* stack, double value) { if (stack-&gt;top &lt; MAX_STACK_SIZE - 1) { stack-&gt;data[&#43;&#43;stack-&gt;top] = value; } else { printf(&#34;错误:栈已满\n&#34;); exit(1); } } double pop(Stack* stack) { if (!isEmpty(stack)) { return stack-&gt;data[stack-&gt;top--]; } else { printf(&#34;错误:栈为空\n&#34;); exit(1); } } // 函数声明 int isOperator(char c); double performOperation(char op, double operand1, double operand2); int evaluatePostfixExpression(const char* postfix, double* result); int main() { printf(&#34;欢迎使用后缀表达式计算器!\n&#34;); printf(&#34;请输入一个后缀表达式,使用空格分隔操作数和操作符,输入&#39;q&#39;退出:\n&#34;); while (1) { char input[100]; fgets(input, sizeof(input), stdin); input[strcspn(input, &#34;\n&#34;)] = &#39;\0&#39;; // 去掉换行符 if (strcmp(input, &#34;q&#34;) == 0) { printf(&#34;感谢使用后缀表达式计算器,再见!\n&#34;); break; } // 检查输入中的非法字符 int validInput = 1; for (int i = 0; input[i] != &#39;\0&#39;; i&#43;&#43;) { if (!isspace(input[i]) &amp;&amp; !isdigit(input[i]) &amp;&amp; !isOperator(input[i])) { validInput = 0; printf(&#34;错误:输入包含非法字符 &#39;%c&#39;\n&#34;, input[i]); break; } } if (validInput) { double result; if (evaluatePostfixExpression(input, &amp;result)) { printf(&#34;结果: %g\n&#34;, result); } else { printf(&#34;错误:无效的后缀表达式\n&#34;); } } printf(&#34;请输入另一个后缀表达式,或输入&#39;q&#39;退出:\n&#34;); } return 0; } int isOperator(char c) { return c == &#39;&#43;&#39; || c == &#39;-&#39; || c == &#39;*&#39; || c == &#39;/&#39;; } double performOperation(char op, double operand1, double operand2) { switch (op) { case &#39;&#43;&#39;: return operand1 &#43; operand2; case &#39;-&#39;: return operand1 - operand2; case &#39;*&#39;: return operand1 * operand2; case &#39;/&#39;: if (operand2 != 0) { return operand1 / operand2; } else { printf(&#34;错误:除数不能为零\n&#34;); exit(1); } default: printf(&#34;错误:未知的操作符 &#39;%c&#39;\n&#34;, op); exit(1); } } int evaluatePostfixExpression(const char* postfix, double* result) { Stack operandStack; initialize(&amp;operandStack); char* token = strtok((char*)postfix, &#34; &#34;); while (token != NULL) { if (isdigit(token[0])) { double operand = atof(token); push(&amp;operandStack, operand); } else if (isOperator(token[0])) { if (operandStack.top &lt; 1) { printf(&#34;错误:操作数不足\n&#34;); return 0; } double operand2 = pop(&amp;operandStack); double operand1 = pop(&amp;operandStack); double result = performOperation(token[0], operand1, operand2); push(&amp;operandStack, result); } else { printf(&#34;错误:无效的标记 &#39;%s&#39;\n&#34;, token); return 0; } token = strtok(NULL, &#34; &#34;); } if (operandStack.top == 0) { *result = operandStack.data[0]; return 1; } else { printf(&#34;错误:操作数不足或操作符过多\n&#34;); return 0; } }后缀表达式的转换方法(中缀转后缀)#将中缀表达式转换为后缀表达式的方法是:从左到右遍历中缀表达式的每个数字和符号,若是数字就输出,若是符号,则判断其与栈顶符号的优先级,是右括号或优先级不高于栈顶符号(乘除优先加减)则栈顶元素依次出栈并输出,并将当前符号进栈,一直到最终输出后缀表达式为止。">
  <meta itemprop="datePublished" content="2023-10-23T00:00:00+00:00">
  <meta itemprop="dateModified" content="2023-10-23T00:00:00+00:00">
  <meta itemprop="wordCount" content="2695">
  <meta itemprop="keywords" content="数据结构">

<title>前缀、后缀，中缀表达式 | rdququ&#39;s Blog</title>
<link rel="icon" href="/favicon.png" >
<link rel="manifest" href="/manifest.json">
<link rel="canonical" href="http://localhost:1313/docs/archive_posts/prefix_infix_postfix_expr/">
<link rel="stylesheet" href="/book.min.cc2c524ed250aac81b23d1f4af87344917b325208841feca0968fe450f570575.css" integrity="sha256-zCxSTtJQqsgbI9H0r4c0SRezJSCIQf7KCWj&#43;RQ9XBXU=" crossorigin="anonymous">


  <script defer src="/fuse.min.js"></script>
  <script defer src="/en.search.min.1cdae00495bbcc99219040905466ac17fee903495acba54776df72d26fbf3f62.js" integrity="sha256-HNrgBJW7zJkhkECQVGasF/7pA0lay6VHdt9y0m&#43;/P2I=" crossorigin="anonymous"></script>



  
</head>
<body dir="ltr" class="book-kind-page book-type-docs">
  <input type="checkbox" class="hidden toggle" id="menu-control" />
  <input type="checkbox" class="hidden toggle" id="toc-control" />
  <main class="container flex">
    
<aside class="book-menu">
  <div class="book-menu-content">
    
  <nav>
<h2 class="book-brand">
  <a class="flex align-center" href="/"><span>rdququ&#39;s Blog</span>
  </a>
</h2>


<div class="book-search hidden">
  <input id="book-search-input" type="text" 
    placeholder="Search"
    aria-label="Search"
    maxlength="64" data-hotkeys="s/" />
  <div class="book-search-spinner hidden"></div>
  <ul id="book-search-results"></ul>
</div>
<script>document.querySelector(".book-search").classList.remove("hidden")</script>













  
  <ul>
    
      
        <li>
          
  
  

  
    <a href="/docs/blog/" class="">
      Blog</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/links/" class="">
      Links</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/archive/" class="">
      Archive</a>
  

        </li>
      
    
  </ul>













</nav>




  <script>(function(){var e=document.querySelector("aside .book-menu-content");addEventListener("beforeunload",function(){localStorage.setItem("menu.scrollTop",e.scrollTop)}),e.scrollTop=localStorage.getItem("menu.scrollTop")})()</script>



  </div>
</aside>
 

    <div class="book-page">
      <header class="book-header hidden">
        
  <div class="flex align-center justify-between">
  <label for="menu-control">
    <img src="/icons/menu.svg" class="book-icon" alt="Menu" />
  </label>

  <h3>前缀、后缀，中缀表达式</h3>

  <label for="toc-control">
    
    <img src="/icons/toc.svg" class="book-icon" alt="Table of Contents" />
    
  </label>
</div>


  
  <aside class="hidden">
    
  
<nav id="TableOfContents">
  <ul>
    <li><a href="#中缀表达式">中缀表达式</a></li>
    <li><a href="#后缀表达式及其求值方法">后缀表达式及其求值方法</a>
      <ul>
        <li><a href="#后缀表达式的求值方法">后缀表达式的求值方法</a></li>
        <li><a href="#c-实现后缀表达式的求值">C++ 实现后缀表达式的求值</a></li>
        <li><a href="#c-实现后缀表达式的求值-1">C 实现后缀表达式的求值</a></li>
        <li><a href="#后缀表达式的转换方法中缀转后缀">后缀表达式的转换方法(中缀转后缀)</a></li>
        <li><a href="#c-实现中缀表达式转后缀表达式">C++ 实现中缀表达式转后缀表达式</a></li>
        <li><a href="#c-实现中缀表达式转后缀表达式-1">C 实现中缀表达式转后缀表达式</a></li>
      </ul>
    </li>
    <li><a href="#前缀表达式及其求值方法">前缀表达式及其求值方法</a>
      <ul>
        <li><a href="#前缀表达式的求值方法">前缀表达式的求值方法</a></li>
        <li><a href="#c-实现前缀表达式的求值">C++ 实现前缀表达式的求值</a></li>
        <li><a href="#c-实现前缀表达式的求值-1">C 实现前缀表达式的求值</a></li>
        <li><a href="#前缀表达式的转换方法中缀转前缀">前缀表达式的转换方法(中缀转前缀)</a></li>
        <li><a href="#c-实现中缀表达式转前缀表达式">C++ 实现中缀表达式转前缀表达式</a></li>
        <li><a href="#c-实现中缀表达式转前缀表达式-1">C 实现中缀表达式转前缀表达式</a></li>
      </ul>
    </li>
  </ul>
</nav>



  </aside>
  
 
      </header>

      
      
  <article class="markdown book-article"><h2 id="中缀表达式">中缀表达式<a class="anchor" href="#%e4%b8%ad%e7%bc%80%e8%a1%a8%e8%be%be%e5%bc%8f">#</a></h2>
<p>中缀表达式就是我们通常所写的表达式,如:<code>1+2*3</code>、<code>1+(2+3)*4-5</code>、<code>1+2*(3+4*(5+6))</code> 等等。</p>
<h2 id="后缀表达式及其求值方法">后缀表达式及其求值方法<a class="anchor" href="#%e5%90%8e%e7%bc%80%e8%a1%a8%e8%be%be%e5%bc%8f%e5%8f%8a%e5%85%b6%e6%b1%82%e5%80%bc%e6%96%b9%e6%b3%95">#</a></h2>
<p>后缀表达式又称为逆波兰表达式,它的特点是运算符在操作数的后面,如:<code>123*+</code>、<code>123+4*+5-</code>、<code>123456+*+*+</code> 等等。</p>
<h3 id="后缀表达式的求值方法">后缀表达式的求值方法<a class="anchor" href="#%e5%90%8e%e7%bc%80%e8%a1%a8%e8%be%be%e5%bc%8f%e7%9a%84%e6%b1%82%e5%80%bc%e6%96%b9%e6%b3%95">#</a></h3>
<p>后缀表达式的求值方法是:从左到右遍历表达式的每个数字和符号,遇到是数字就进栈,遇到是符号,就将处于栈顶两个数字出栈,进行运算,运算结果进栈,一直到最终获得结果。</p>
<p>例如:<code>123*+</code> 的求值过程如下:</p>
<table>
  <thead>
      <tr>
          <th>读入字符</th>
          <th>当前栈</th>
          <th>说明</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td>1</td>
          <td>1</td>
          <td>读入 1,进栈</td>
      </tr>
      <tr>
          <td>2</td>
          <td>1 2</td>
          <td>读入 2,进栈</td>
      </tr>
      <tr>
          <td>3</td>
          <td>1 2 3</td>
          <td>读入 3,进栈</td>
      </tr>
      <tr>
          <td>*</td>
          <td>1 6</td>
          <td>读入 *,出栈 3 和 2,计算 2 * 3 = 6,将 6 进栈</td>
      </tr>
      <tr>
          <td>+</td>
          <td>7</td>
          <td>读入 +,出栈 6 和 1,计算 1 + 6 = 7,将 7 进栈</td>
      </tr>
  </tbody>
</table>
<h3 id="c-实现后缀表达式的求值">C++ 实现后缀表达式的求值<a class="anchor" href="#c-%e5%ae%9e%e7%8e%b0%e5%90%8e%e7%bc%80%e8%a1%a8%e8%be%be%e5%bc%8f%e7%9a%84%e6%b1%82%e5%80%bc">#</a></h3>
<p>用C++实现后缀表达式的求值。要求有简单的控制台UI,并且要对用户的危险行为进行检查和警告。控制台输出的语句要求是中英文对照,并且在用户进行错误操作的时候告知他进行了什么错误操作。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#75715e">#include</span> <span style="color:#75715e">&lt;iostream&gt;</span><span style="color:#75715e">
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">#include</span> <span style="color:#75715e">&lt;stack&gt;</span><span style="color:#75715e">
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">#include</span> <span style="color:#75715e">&lt;string&gt;</span><span style="color:#75715e">
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">#include</span> <span style="color:#75715e">&lt;sstream&gt;</span><span style="color:#75715e">
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">#include</span> <span style="color:#75715e">&lt;cctype&gt;</span><span style="color:#75715e">
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">using</span> <span style="color:#66d9ef">namespace</span> std;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// 函数声明
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">bool</span> <span style="color:#a6e22e">isOperator</span>(<span style="color:#66d9ef">char</span> c);
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">double</span> <span style="color:#a6e22e">performOperation</span>(<span style="color:#66d9ef">char</span> op, <span style="color:#66d9ef">double</span> operand1, <span style="color:#66d9ef">double</span> operand2);
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">bool</span> <span style="color:#a6e22e">evaluatePostfixExpression</span>(<span style="color:#66d9ef">const</span> string<span style="color:#f92672">&amp;</span> postfix, <span style="color:#66d9ef">double</span><span style="color:#f92672">&amp;</span> result);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">int</span> <span style="color:#a6e22e">main</span>() {
</span></span><span style="display:flex;"><span>    cout <span style="color:#f92672">&lt;&lt;</span> <span style="color:#e6db74">&#34;欢迎使用后缀表达式计算器!&#34;</span> <span style="color:#f92672">&lt;&lt;</span> endl;
</span></span><span style="display:flex;"><span>    cout <span style="color:#f92672">&lt;&lt;</span> <span style="color:#e6db74">&#34;请输入一个后缀表达式,使用空格分隔操作数和操作符,输入&#39;q&#39;退出:&#34;</span> <span style="color:#f92672">&lt;&lt;</span> endl;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">while</span> (true) {
</span></span><span style="display:flex;"><span>        string input;
</span></span><span style="display:flex;"><span>        getline(cin, input);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">if</span> (input <span style="color:#f92672">==</span> <span style="color:#e6db74">&#34;q&#34;</span>) {
</span></span><span style="display:flex;"><span>            cout <span style="color:#f92672">&lt;&lt;</span> <span style="color:#e6db74">&#34;感谢使用后缀表达式计算器,再见!&#34;</span> <span style="color:#f92672">&lt;&lt;</span> endl;
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">break</span>;
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">// 检查输入中的非法字符
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        <span style="color:#66d9ef">bool</span> validInput <span style="color:#f92672">=</span> true;
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">for</span> (<span style="color:#66d9ef">char</span> c : input) {
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">if</span> (<span style="color:#f92672">!</span>isspace(c) <span style="color:#f92672">&amp;&amp;</span> <span style="color:#f92672">!</span>isdigit(c) <span style="color:#f92672">&amp;&amp;</span> <span style="color:#f92672">!</span>isOperator(c)) {
</span></span><span style="display:flex;"><span>                validInput <span style="color:#f92672">=</span> false;
</span></span><span style="display:flex;"><span>                cout <span style="color:#f92672">&lt;&lt;</span> <span style="color:#e6db74">&#34;错误:输入包含非法字符 &#39;&#34;</span> <span style="color:#f92672">&lt;&lt;</span> c <span style="color:#f92672">&lt;&lt;</span> <span style="color:#e6db74">&#34;&#39;&#34;</span> <span style="color:#f92672">&lt;&lt;</span> endl;
</span></span><span style="display:flex;"><span>                <span style="color:#66d9ef">break</span>;
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">if</span> (validInput) {
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">double</span> result;
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">if</span> (evaluatePostfixExpression(input, result)) {
</span></span><span style="display:flex;"><span>                cout <span style="color:#f92672">&lt;&lt;</span> <span style="color:#e6db74">&#34;结果: &#34;</span> <span style="color:#f92672">&lt;&lt;</span> result <span style="color:#f92672">&lt;&lt;</span> endl;
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">else</span> {
</span></span><span style="display:flex;"><span>                cout <span style="color:#f92672">&lt;&lt;</span> <span style="color:#e6db74">&#34;错误:无效的后缀表达式&#34;</span> <span style="color:#f92672">&lt;&lt;</span> endl;
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        cout <span style="color:#f92672">&lt;&lt;</span> <span style="color:#e6db74">&#34;请输入另一个后缀表达式,或输入&#39;q&#39;退出:&#34;</span> <span style="color:#f92672">&lt;&lt;</span> endl;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> <span style="color:#ae81ff">0</span>;
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">bool</span> <span style="color:#a6e22e">isOperator</span>(<span style="color:#66d9ef">char</span> c) {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> c <span style="color:#f92672">==</span> <span style="color:#e6db74">&#39;+&#39;</span> <span style="color:#f92672">||</span> c <span style="color:#f92672">==</span> <span style="color:#e6db74">&#39;-&#39;</span> <span style="color:#f92672">||</span> c <span style="color:#f92672">==</span> <span style="color:#e6db74">&#39;*&#39;</span> <span style="color:#f92672">||</span> c <span style="color:#f92672">==</span> <span style="color:#e6db74">&#39;/&#39;</span>;
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">double</span> <span style="color:#a6e22e">performOperation</span>(<span style="color:#66d9ef">char</span> op, <span style="color:#66d9ef">double</span> operand1, <span style="color:#66d9ef">double</span> operand2) {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">switch</span> (op) {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">case</span> <span style="color:#e6db74">&#39;+&#39;</span><span style="color:#f92672">:</span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> operand1 <span style="color:#f92672">+</span> operand2;
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">case</span> <span style="color:#e6db74">&#39;-&#39;</span><span style="color:#f92672">:</span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> operand1 <span style="color:#f92672">-</span> operand2;
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">case</span> <span style="color:#e6db74">&#39;*&#39;</span><span style="color:#f92672">:</span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> operand1 <span style="color:#f92672">*</span> operand2;
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">case</span> <span style="color:#e6db74">&#39;/&#39;</span><span style="color:#f92672">:</span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">if</span> (operand2 <span style="color:#f92672">!=</span> <span style="color:#ae81ff">0</span>) {
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">return</span> operand1 <span style="color:#f92672">/</span> operand2;
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">else</span> {
</span></span><span style="display:flex;"><span>            cout <span style="color:#f92672">&lt;&lt;</span> <span style="color:#e6db74">&#34;错误:除数不能为零&#34;</span> <span style="color:#f92672">&lt;&lt;</span> endl;
</span></span><span style="display:flex;"><span>            exit(<span style="color:#ae81ff">1</span>);
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">default</span><span style="color:#f92672">:</span>
</span></span><span style="display:flex;"><span>        cout <span style="color:#f92672">&lt;&lt;</span> <span style="color:#e6db74">&#34;错误:未知的操作符 &#39;&#34;</span> <span style="color:#f92672">&lt;&lt;</span> op <span style="color:#f92672">&lt;&lt;</span> <span style="color:#e6db74">&#34;&#39;&#34;</span> <span style="color:#f92672">&lt;&lt;</span> endl;
</span></span><span style="display:flex;"><span>        exit(<span style="color:#ae81ff">1</span>);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">bool</span> <span style="color:#a6e22e">evaluatePostfixExpression</span>(<span style="color:#66d9ef">const</span> string<span style="color:#f92672">&amp;</span> postfix, <span style="color:#66d9ef">double</span><span style="color:#f92672">&amp;</span> result) {
</span></span><span style="display:flex;"><span>    stack<span style="color:#f92672">&lt;</span><span style="color:#66d9ef">double</span><span style="color:#f92672">&gt;</span> operandStack;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    istringstream iss(postfix);
</span></span><span style="display:flex;"><span>    string token;
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">while</span> (iss <span style="color:#f92672">&gt;&gt;</span> token) {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">if</span> (isdigit(token[<span style="color:#ae81ff">0</span>])) {
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">double</span> operand <span style="color:#f92672">=</span> stod(token);
</span></span><span style="display:flex;"><span>            operandStack.push(operand);
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">else</span> <span style="color:#66d9ef">if</span> (isOperator(token[<span style="color:#ae81ff">0</span>])) {
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">if</span> (operandStack.size() <span style="color:#f92672">&lt;</span> <span style="color:#ae81ff">2</span>) {
</span></span><span style="display:flex;"><span>                cout <span style="color:#f92672">&lt;&lt;</span> <span style="color:#e6db74">&#34;错误:操作数不足&#34;</span> <span style="color:#f92672">&lt;&lt;</span> endl;
</span></span><span style="display:flex;"><span>                <span style="color:#66d9ef">return</span> false;
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">double</span> operand2 <span style="color:#f92672">=</span> operandStack.top();
</span></span><span style="display:flex;"><span>            operandStack.pop();
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">double</span> operand1 <span style="color:#f92672">=</span> operandStack.top();
</span></span><span style="display:flex;"><span>            operandStack.pop();
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">double</span> result <span style="color:#f92672">=</span> performOperation(token[<span style="color:#ae81ff">0</span>], operand1, operand2);
</span></span><span style="display:flex;"><span>            operandStack.push(result);
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">else</span> {
</span></span><span style="display:flex;"><span>            cout <span style="color:#f92672">&lt;&lt;</span> <span style="color:#e6db74">&#34;错误:无效的标记 &#39;&#34;</span> <span style="color:#f92672">&lt;&lt;</span> token <span style="color:#f92672">&lt;&lt;</span> <span style="color:#e6db74">&#34;&#39;&#34;</span> <span style="color:#f92672">&lt;&lt;</span> endl;
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">return</span> false;
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">if</span> (operandStack.size() <span style="color:#f92672">==</span> <span style="color:#ae81ff">1</span>) {
</span></span><span style="display:flex;"><span>        result <span style="color:#f92672">=</span> operandStack.top();
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> true;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">else</span> {
</span></span><span style="display:flex;"><span>        cout <span style="color:#f92672">&lt;&lt;</span> <span style="color:#e6db74">&#34;错误:操作数不足或操作符过多&#34;</span> <span style="color:#f92672">&lt;&lt;</span> endl;
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> false;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div><h3 id="c-实现后缀表达式的求值-1">C 实现后缀表达式的求值<a class="anchor" href="#c-%e5%ae%9e%e7%8e%b0%e5%90%8e%e7%bc%80%e8%a1%a8%e8%be%be%e5%bc%8f%e7%9a%84%e6%b1%82%e5%80%bc-1">#</a></h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c" data-lang="c"><span style="display:flex;"><span><span style="color:#75715e">#include</span> <span style="color:#75715e">&lt;stdio.h&gt;</span><span style="color:#75715e">
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">#include</span> <span style="color:#75715e">&lt;stdlib.h&gt;</span><span style="color:#75715e">
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">#include</span> <span style="color:#75715e">&lt;string.h&gt;</span><span style="color:#75715e">
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">#include</span> <span style="color:#75715e">&lt;ctype.h&gt;</span><span style="color:#75715e">
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#define MAX_STACK_SIZE 100
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">#pragma warning(disable : 4996)
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// 栈结构和操作
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">typedef</span> <span style="color:#66d9ef">struct</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">double</span> data[MAX_STACK_SIZE];
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">int</span> top;
</span></span><span style="display:flex;"><span>} Stack;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">void</span> <span style="color:#a6e22e">initialize</span>(Stack<span style="color:#f92672">*</span> stack) {
</span></span><span style="display:flex;"><span>    stack<span style="color:#f92672">-&gt;</span>top <span style="color:#f92672">=</span> <span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>;
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">int</span> <span style="color:#a6e22e">isEmpty</span>(Stack<span style="color:#f92672">*</span> stack) {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> stack<span style="color:#f92672">-&gt;</span>top <span style="color:#f92672">==</span> <span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>;
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">void</span> <span style="color:#a6e22e">push</span>(Stack<span style="color:#f92672">*</span> stack, <span style="color:#66d9ef">double</span> value) {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">if</span> (stack<span style="color:#f92672">-&gt;</span>top <span style="color:#f92672">&lt;</span> MAX_STACK_SIZE <span style="color:#f92672">-</span> <span style="color:#ae81ff">1</span>) {
</span></span><span style="display:flex;"><span>        stack<span style="color:#f92672">-&gt;</span>data[<span style="color:#f92672">++</span>stack<span style="color:#f92672">-&gt;</span>top] <span style="color:#f92672">=</span> value;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">else</span> {
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">printf</span>(<span style="color:#e6db74">&#34;错误:栈已满</span><span style="color:#ae81ff">\n</span><span style="color:#e6db74">&#34;</span>);
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">exit</span>(<span style="color:#ae81ff">1</span>);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">double</span> <span style="color:#a6e22e">pop</span>(Stack<span style="color:#f92672">*</span> stack) {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">if</span> (<span style="color:#f92672">!</span><span style="color:#a6e22e">isEmpty</span>(stack)) {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> stack<span style="color:#f92672">-&gt;</span>data[stack<span style="color:#f92672">-&gt;</span>top<span style="color:#f92672">--</span>];
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">else</span> {
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">printf</span>(<span style="color:#e6db74">&#34;错误:栈为空</span><span style="color:#ae81ff">\n</span><span style="color:#e6db74">&#34;</span>);
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">exit</span>(<span style="color:#ae81ff">1</span>);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// 函数声明
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">int</span> <span style="color:#a6e22e">isOperator</span>(<span style="color:#66d9ef">char</span> c);
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">double</span> <span style="color:#a6e22e">performOperation</span>(<span style="color:#66d9ef">char</span> op, <span style="color:#66d9ef">double</span> operand1, <span style="color:#66d9ef">double</span> operand2);
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">int</span> <span style="color:#a6e22e">evaluatePostfixExpression</span>(<span style="color:#66d9ef">const</span> <span style="color:#66d9ef">char</span><span style="color:#f92672">*</span> postfix, <span style="color:#66d9ef">double</span><span style="color:#f92672">*</span> result);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">int</span> <span style="color:#a6e22e">main</span>() {
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">printf</span>(<span style="color:#e6db74">&#34;欢迎使用后缀表达式计算器!</span><span style="color:#ae81ff">\n</span><span style="color:#e6db74">&#34;</span>);
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">printf</span>(<span style="color:#e6db74">&#34;请输入一个后缀表达式,使用空格分隔操作数和操作符,输入&#39;q&#39;退出:</span><span style="color:#ae81ff">\n</span><span style="color:#e6db74">&#34;</span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">while</span> (<span style="color:#ae81ff">1</span>) {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">char</span> input[<span style="color:#ae81ff">100</span>];
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">fgets</span>(input, <span style="color:#66d9ef">sizeof</span>(input), stdin);
</span></span><span style="display:flex;"><span>        input[<span style="color:#a6e22e">strcspn</span>(input, <span style="color:#e6db74">&#34;</span><span style="color:#ae81ff">\n</span><span style="color:#e6db74">&#34;</span>)] <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;\0&#39;</span>; <span style="color:#75715e">// 去掉换行符
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">if</span> (<span style="color:#a6e22e">strcmp</span>(input, <span style="color:#e6db74">&#34;q&#34;</span>) <span style="color:#f92672">==</span> <span style="color:#ae81ff">0</span>) {
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">printf</span>(<span style="color:#e6db74">&#34;感谢使用后缀表达式计算器,再见!</span><span style="color:#ae81ff">\n</span><span style="color:#e6db74">&#34;</span>);
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">break</span>;
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">// 检查输入中的非法字符
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        <span style="color:#66d9ef">int</span> validInput <span style="color:#f92672">=</span> <span style="color:#ae81ff">1</span>;
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">for</span> (<span style="color:#66d9ef">int</span> i <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>; input[i] <span style="color:#f92672">!=</span> <span style="color:#e6db74">&#39;\0&#39;</span>; i<span style="color:#f92672">++</span>) {
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">if</span> (<span style="color:#f92672">!</span><span style="color:#a6e22e">isspace</span>(input[i]) <span style="color:#f92672">&amp;&amp;</span> <span style="color:#f92672">!</span><span style="color:#a6e22e">isdigit</span>(input[i]) <span style="color:#f92672">&amp;&amp;</span> <span style="color:#f92672">!</span><span style="color:#a6e22e">isOperator</span>(input[i])) {
</span></span><span style="display:flex;"><span>                validInput <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>;
</span></span><span style="display:flex;"><span>                <span style="color:#a6e22e">printf</span>(<span style="color:#e6db74">&#34;错误:输入包含非法字符 &#39;%c&#39;</span><span style="color:#ae81ff">\n</span><span style="color:#e6db74">&#34;</span>, input[i]);
</span></span><span style="display:flex;"><span>                <span style="color:#66d9ef">break</span>;
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">if</span> (validInput) {
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">double</span> result;
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">if</span> (<span style="color:#a6e22e">evaluatePostfixExpression</span>(input, <span style="color:#f92672">&amp;</span>result)) {
</span></span><span style="display:flex;"><span>                <span style="color:#a6e22e">printf</span>(<span style="color:#e6db74">&#34;结果: %g</span><span style="color:#ae81ff">\n</span><span style="color:#e6db74">&#34;</span>, result);
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">else</span> {
</span></span><span style="display:flex;"><span>                <span style="color:#a6e22e">printf</span>(<span style="color:#e6db74">&#34;错误:无效的后缀表达式</span><span style="color:#ae81ff">\n</span><span style="color:#e6db74">&#34;</span>);
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">printf</span>(<span style="color:#e6db74">&#34;请输入另一个后缀表达式,或输入&#39;q&#39;退出:</span><span style="color:#ae81ff">\n</span><span style="color:#e6db74">&#34;</span>);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> <span style="color:#ae81ff">0</span>;
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">int</span> <span style="color:#a6e22e">isOperator</span>(<span style="color:#66d9ef">char</span> c) {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> c <span style="color:#f92672">==</span> <span style="color:#e6db74">&#39;+&#39;</span> <span style="color:#f92672">||</span> c <span style="color:#f92672">==</span> <span style="color:#e6db74">&#39;-&#39;</span> <span style="color:#f92672">||</span> c <span style="color:#f92672">==</span> <span style="color:#e6db74">&#39;*&#39;</span> <span style="color:#f92672">||</span> c <span style="color:#f92672">==</span> <span style="color:#e6db74">&#39;/&#39;</span>;
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">double</span> <span style="color:#a6e22e">performOperation</span>(<span style="color:#66d9ef">char</span> op, <span style="color:#66d9ef">double</span> operand1, <span style="color:#66d9ef">double</span> operand2) {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">switch</span> (op) {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">case</span> <span style="color:#e6db74">&#39;+&#39;</span><span style="color:#f92672">:</span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> operand1 <span style="color:#f92672">+</span> operand2;
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">case</span> <span style="color:#e6db74">&#39;-&#39;</span><span style="color:#f92672">:</span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> operand1 <span style="color:#f92672">-</span> operand2;
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">case</span> <span style="color:#e6db74">&#39;*&#39;</span><span style="color:#f92672">:</span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> operand1 <span style="color:#f92672">*</span> operand2;
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">case</span> <span style="color:#e6db74">&#39;/&#39;</span><span style="color:#f92672">:</span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">if</span> (operand2 <span style="color:#f92672">!=</span> <span style="color:#ae81ff">0</span>) {
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">return</span> operand1 <span style="color:#f92672">/</span> operand2;
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">else</span> {
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">printf</span>(<span style="color:#e6db74">&#34;错误:除数不能为零</span><span style="color:#ae81ff">\n</span><span style="color:#e6db74">&#34;</span>);
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">exit</span>(<span style="color:#ae81ff">1</span>);
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">default</span><span style="color:#f92672">:</span>
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">printf</span>(<span style="color:#e6db74">&#34;错误:未知的操作符 &#39;%c&#39;</span><span style="color:#ae81ff">\n</span><span style="color:#e6db74">&#34;</span>, op);
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">exit</span>(<span style="color:#ae81ff">1</span>);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">int</span> <span style="color:#a6e22e">evaluatePostfixExpression</span>(<span style="color:#66d9ef">const</span> <span style="color:#66d9ef">char</span><span style="color:#f92672">*</span> postfix, <span style="color:#66d9ef">double</span><span style="color:#f92672">*</span> result) {
</span></span><span style="display:flex;"><span>    Stack operandStack;
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">initialize</span>(<span style="color:#f92672">&amp;</span>operandStack);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">char</span><span style="color:#f92672">*</span> token <span style="color:#f92672">=</span> <span style="color:#a6e22e">strtok</span>((<span style="color:#66d9ef">char</span><span style="color:#f92672">*</span>)postfix, <span style="color:#e6db74">&#34; &#34;</span>);
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">while</span> (token <span style="color:#f92672">!=</span> NULL) {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">if</span> (<span style="color:#a6e22e">isdigit</span>(token[<span style="color:#ae81ff">0</span>])) {
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">double</span> operand <span style="color:#f92672">=</span> <span style="color:#a6e22e">atof</span>(token);
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">push</span>(<span style="color:#f92672">&amp;</span>operandStack, operand);
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">else</span> <span style="color:#66d9ef">if</span> (<span style="color:#a6e22e">isOperator</span>(token[<span style="color:#ae81ff">0</span>])) {
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">if</span> (operandStack.top <span style="color:#f92672">&lt;</span> <span style="color:#ae81ff">1</span>) {
</span></span><span style="display:flex;"><span>                <span style="color:#a6e22e">printf</span>(<span style="color:#e6db74">&#34;错误:操作数不足</span><span style="color:#ae81ff">\n</span><span style="color:#e6db74">&#34;</span>);
</span></span><span style="display:flex;"><span>                <span style="color:#66d9ef">return</span> <span style="color:#ae81ff">0</span>;
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">double</span> operand2 <span style="color:#f92672">=</span> <span style="color:#a6e22e">pop</span>(<span style="color:#f92672">&amp;</span>operandStack);
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">double</span> operand1 <span style="color:#f92672">=</span> <span style="color:#a6e22e">pop</span>(<span style="color:#f92672">&amp;</span>operandStack);
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">double</span> result <span style="color:#f92672">=</span> <span style="color:#a6e22e">performOperation</span>(token[<span style="color:#ae81ff">0</span>], operand1, operand2);
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">push</span>(<span style="color:#f92672">&amp;</span>operandStack, result);
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">else</span> {
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">printf</span>(<span style="color:#e6db74">&#34;错误:无效的标记 &#39;%s&#39;</span><span style="color:#ae81ff">\n</span><span style="color:#e6db74">&#34;</span>, token);
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">return</span> <span style="color:#ae81ff">0</span>;
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        token <span style="color:#f92672">=</span> <span style="color:#a6e22e">strtok</span>(NULL, <span style="color:#e6db74">&#34; &#34;</span>);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">if</span> (operandStack.top <span style="color:#f92672">==</span> <span style="color:#ae81ff">0</span>) {
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">*</span>result <span style="color:#f92672">=</span> operandStack.data[<span style="color:#ae81ff">0</span>];
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> <span style="color:#ae81ff">1</span>;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">else</span> {
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">printf</span>(<span style="color:#e6db74">&#34;错误:操作数不足或操作符过多</span><span style="color:#ae81ff">\n</span><span style="color:#e6db74">&#34;</span>);
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> <span style="color:#ae81ff">0</span>;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div><h3 id="后缀表达式的转换方法中缀转后缀">后缀表达式的转换方法(中缀转后缀)<a class="anchor" href="#%e5%90%8e%e7%bc%80%e8%a1%a8%e8%be%be%e5%bc%8f%e7%9a%84%e8%bd%ac%e6%8d%a2%e6%96%b9%e6%b3%95%e4%b8%ad%e7%bc%80%e8%bd%ac%e5%90%8e%e7%bc%80">#</a></h3>
<p>将中缀表达式转换为后缀表达式的方法是:从左到右遍历中缀表达式的每个数字和符号,若是数字就输出,若是符号,则判断其与栈顶符号的优先级,是右括号或优先级不高于栈顶符号(乘除优先加减)则栈顶元素依次出栈并输出,并将当前符号进栈,一直到最终输出后缀表达式为止。</p>
<p>例如:<code>1+(2+3)*4-5</code> 的转换过程如下:</p>
<table>
  <thead>
      <tr>
          <th>读入字符</th>
          <th>当前栈</th>
          <th>说明</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td>1</td>
          <td>1</td>
          <td>读入 1,输出</td>
      </tr>
      <tr>
          <td>+</td>
          <td>+</td>
          <td>读入 +,进栈</td>
      </tr>
      <tr>
          <td>(</td>
          <td>+ (</td>
          <td>读入 (,进栈</td>
      </tr>
      <tr>
          <td>2</td>
          <td>+ ( 2</td>
          <td>读入 2,输出</td>
      </tr>
      <tr>
          <td>+</td>
          <td>+ ( +</td>
          <td>读入 +,进栈</td>
      </tr>
      <tr>
          <td>3</td>
          <td>+ ( + 3</td>
          <td>读入 3,输出</td>
      </tr>
      <tr>
          <td>)</td>
          <td>+</td>
          <td>读入 ),依次出栈 + 和 (,输出</td>
      </tr>
      <tr>
          <td>*</td>
          <td>*</td>
          <td>读入 *,进栈</td>
      </tr>
      <tr>
          <td>4</td>
          <td>* 4</td>
          <td>读入 4,输出</td>
      </tr>
      <tr>
          <td>-</td>
          <td>-</td>
          <td>读入 -,进栈</td>
      </tr>
      <tr>
          <td>5</td>
          <td>- 5</td>
          <td>读入 5,输出</td>
      </tr>
      <tr>
          <td>空</td>
          <td>-</td>
          <td>依次出栈 - 和 *,输出</td>
      </tr>
  </tbody>
</table>
<p>转换后的后缀表达式为:<code>123+4*+5-</code>。</p>
<h3 id="c-实现中缀表达式转后缀表达式">C++ 实现中缀表达式转后缀表达式<a class="anchor" href="#c-%e5%ae%9e%e7%8e%b0%e4%b8%ad%e7%bc%80%e8%a1%a8%e8%be%be%e5%bc%8f%e8%bd%ac%e5%90%8e%e7%bc%80%e8%a1%a8%e8%be%be%e5%bc%8f">#</a></h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#75715e">#include</span> <span style="color:#75715e">&lt;iostream&gt;</span><span style="color:#75715e">
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">#include</span> <span style="color:#75715e">&lt;stack&gt;</span><span style="color:#75715e">
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">#include</span> <span style="color:#75715e">&lt;string&gt;</span><span style="color:#75715e">
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">using</span> <span style="color:#66d9ef">namespace</span> std;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// 函数声明
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">int</span> <span style="color:#a6e22e">getOperatorPrecedence</span>(<span style="color:#66d9ef">char</span> op);
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">bool</span> <span style="color:#a6e22e">isOperator</span>(<span style="color:#66d9ef">char</span> c);
</span></span><span style="display:flex;"><span>string <span style="color:#a6e22e">infixToPostfix</span>(<span style="color:#66d9ef">const</span> string<span style="color:#f92672">&amp;</span> infix);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">int</span> <span style="color:#a6e22e">main</span>() {
</span></span><span style="display:flex;"><span>    cout <span style="color:#f92672">&lt;&lt;</span> <span style="color:#e6db74">&#34;欢迎使用中缀表达式转后缀表达式程序!&#34;</span> <span style="color:#f92672">&lt;&lt;</span> endl;
</span></span><span style="display:flex;"><span>    cout <span style="color:#f92672">&lt;&lt;</span> <span style="color:#e6db74">&#34;请输入一个中缀表达式,输入&#39;q&#39;退出:&#34;</span> <span style="color:#f92672">&lt;&lt;</span> endl;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">while</span> (true) {
</span></span><span style="display:flex;"><span>        string infixExpression;
</span></span><span style="display:flex;"><span>        getline(cin, infixExpression);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">if</span> (infixExpression <span style="color:#f92672">==</span> <span style="color:#e6db74">&#34;q&#34;</span>) {
</span></span><span style="display:flex;"><span>            cout <span style="color:#f92672">&lt;&lt;</span> <span style="color:#e6db74">&#34;感谢使用中缀表达式转后缀表达式程序,再见!&#34;</span> <span style="color:#f92672">&lt;&lt;</span> endl;
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">break</span>;
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        string postfixExpression <span style="color:#f92672">=</span> infixToPostfix(infixExpression);
</span></span><span style="display:flex;"><span>        cout <span style="color:#f92672">&lt;&lt;</span> <span style="color:#e6db74">&#34;后缀表达式:&#34;</span> <span style="color:#f92672">&lt;&lt;</span> postfixExpression <span style="color:#f92672">&lt;&lt;</span> endl;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        cout <span style="color:#f92672">&lt;&lt;</span> <span style="color:#e6db74">&#34;请输入另一个中缀表达式,或输入&#39;q&#39;退出:&#34;</span> <span style="color:#f92672">&lt;&lt;</span> endl;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> <span style="color:#ae81ff">0</span>;
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">int</span> <span style="color:#a6e22e">getOperatorPrecedence</span>(<span style="color:#66d9ef">char</span> op) {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">switch</span> (op) {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">case</span> <span style="color:#e6db74">&#39;+&#39;</span><span style="color:#f92672">:</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">case</span> <span style="color:#e6db74">&#39;-&#39;</span><span style="color:#f92672">:</span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> <span style="color:#ae81ff">1</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">case</span> <span style="color:#e6db74">&#39;*&#39;</span><span style="color:#f92672">:</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">case</span> <span style="color:#e6db74">&#39;/&#39;</span><span style="color:#f92672">:</span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> <span style="color:#ae81ff">2</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">default</span><span style="color:#f92672">:</span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> <span style="color:#ae81ff">0</span>;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">bool</span> <span style="color:#a6e22e">isOperator</span>(<span style="color:#66d9ef">char</span> c) {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> c <span style="color:#f92672">==</span> <span style="color:#e6db74">&#39;+&#39;</span> <span style="color:#f92672">||</span> c <span style="color:#f92672">==</span> <span style="color:#e6db74">&#39;-&#39;</span> <span style="color:#f92672">||</span> c <span style="color:#f92672">==</span> <span style="color:#e6db74">&#39;*&#39;</span> <span style="color:#f92672">||</span> c <span style="color:#f92672">==</span> <span style="color:#e6db74">&#39;/&#39;</span>;
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>string <span style="color:#a6e22e">infixToPostfix</span>(<span style="color:#66d9ef">const</span> string<span style="color:#f92672">&amp;</span> infix) {
</span></span><span style="display:flex;"><span>    stack<span style="color:#f92672">&lt;</span><span style="color:#66d9ef">char</span><span style="color:#f92672">&gt;</span> operatorStack;
</span></span><span style="display:flex;"><span>    string postfixExpression;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">for</span> (<span style="color:#66d9ef">char</span> c : infix) {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">if</span> (isspace(c)) {
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">continue</span>;
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">else</span> <span style="color:#66d9ef">if</span> (isdigit(c) <span style="color:#f92672">||</span> isalpha(c)) {
</span></span><span style="display:flex;"><span>            postfixExpression <span style="color:#f92672">+=</span> c;
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">else</span> <span style="color:#66d9ef">if</span> (isOperator(c)) {
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">while</span> (<span style="color:#f92672">!</span>operatorStack.empty() <span style="color:#f92672">&amp;&amp;</span>
</span></span><span style="display:flex;"><span>                getOperatorPrecedence(operatorStack.top()) <span style="color:#f92672">&gt;=</span> getOperatorPrecedence(c)) {
</span></span><span style="display:flex;"><span>                postfixExpression <span style="color:#f92672">+=</span> operatorStack.top();
</span></span><span style="display:flex;"><span>                operatorStack.pop();
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>            operatorStack.push(c);
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">else</span> <span style="color:#66d9ef">if</span> (c <span style="color:#f92672">==</span> <span style="color:#e6db74">&#39;(&#39;</span>) {
</span></span><span style="display:flex;"><span>            operatorStack.push(c);
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">else</span> <span style="color:#66d9ef">if</span> (c <span style="color:#f92672">==</span> <span style="color:#e6db74">&#39;)&#39;</span>) {
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">while</span> (<span style="color:#f92672">!</span>operatorStack.empty() <span style="color:#f92672">&amp;&amp;</span> operatorStack.top() <span style="color:#f92672">!=</span> <span style="color:#e6db74">&#39;(&#39;</span>) {
</span></span><span style="display:flex;"><span>                postfixExpression <span style="color:#f92672">+=</span> operatorStack.top();
</span></span><span style="display:flex;"><span>                operatorStack.pop();
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">if</span> (<span style="color:#f92672">!</span>operatorStack.empty() <span style="color:#f92672">&amp;&amp;</span> operatorStack.top() <span style="color:#f92672">==</span> <span style="color:#e6db74">&#39;(&#39;</span>) {
</span></span><span style="display:flex;"><span>                operatorStack.pop();
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">else</span> {
</span></span><span style="display:flex;"><span>                cout <span style="color:#f92672">&lt;&lt;</span> <span style="color:#e6db74">&#34;错误:括号不匹配&#34;</span> <span style="color:#f92672">&lt;&lt;</span> endl;
</span></span><span style="display:flex;"><span>                exit(<span style="color:#ae81ff">1</span>);
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">else</span> {
</span></span><span style="display:flex;"><span>            cout <span style="color:#f92672">&lt;&lt;</span> <span style="color:#e6db74">&#34;错误:无效的字符 &#39;&#34;</span> <span style="color:#f92672">&lt;&lt;</span> c <span style="color:#f92672">&lt;&lt;</span> <span style="color:#e6db74">&#34;&#39;&#34;</span> <span style="color:#f92672">&lt;&lt;</span> endl;
</span></span><span style="display:flex;"><span>            exit(<span style="color:#ae81ff">1</span>);
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">while</span> (<span style="color:#f92672">!</span>operatorStack.empty()) {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">if</span> (operatorStack.top() <span style="color:#f92672">==</span> <span style="color:#e6db74">&#39;(&#39;</span>) {
</span></span><span style="display:flex;"><span>            cout <span style="color:#f92672">&lt;&lt;</span> <span style="color:#e6db74">&#34;错误:括号不匹配&#34;</span> <span style="color:#f92672">&lt;&lt;</span> endl;
</span></span><span style="display:flex;"><span>            exit(<span style="color:#ae81ff">1</span>);
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>        postfixExpression <span style="color:#f92672">+=</span> operatorStack.top();
</span></span><span style="display:flex;"><span>        operatorStack.pop();
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> postfixExpression;
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div><h3 id="c-实现中缀表达式转后缀表达式-1">C 实现中缀表达式转后缀表达式<a class="anchor" href="#c-%e5%ae%9e%e7%8e%b0%e4%b8%ad%e7%bc%80%e8%a1%a8%e8%be%be%e5%bc%8f%e8%bd%ac%e5%90%8e%e7%bc%80%e8%a1%a8%e8%be%be%e5%bc%8f-1">#</a></h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c" data-lang="c"><span style="display:flex;"><span><span style="color:#75715e">#include</span> <span style="color:#75715e">&lt;stdio.h&gt;</span><span style="color:#75715e">
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">#include</span> <span style="color:#75715e">&lt;stdlib.h&gt;</span><span style="color:#75715e">
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">#include</span> <span style="color:#75715e">&lt;string.h&gt;</span><span style="color:#75715e">
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">#include</span> <span style="color:#75715e">&lt;ctype.h&gt;</span><span style="color:#75715e">
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#define MAX_STACK_SIZE 100
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// 栈结构和操作
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">typedef</span> <span style="color:#66d9ef">struct</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">char</span> data[MAX_STACK_SIZE];
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">int</span> top;
</span></span><span style="display:flex;"><span>} Stack;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">void</span> <span style="color:#a6e22e">initialize</span>(Stack<span style="color:#f92672">*</span> stack) {
</span></span><span style="display:flex;"><span>    stack<span style="color:#f92672">-&gt;</span>top <span style="color:#f92672">=</span> <span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>;
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">int</span> <span style="color:#a6e22e">isEmpty</span>(Stack<span style="color:#f92672">*</span> stack) {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> stack<span style="color:#f92672">-&gt;</span>top <span style="color:#f92672">==</span> <span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>;
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">int</span> <span style="color:#a6e22e">isFull</span>(Stack<span style="color:#f92672">*</span> stack) {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> stack<span style="color:#f92672">-&gt;</span>top <span style="color:#f92672">==</span> MAX_STACK_SIZE <span style="color:#f92672">-</span> <span style="color:#ae81ff">1</span>;
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">void</span> <span style="color:#a6e22e">push</span>(Stack<span style="color:#f92672">*</span> stack, <span style="color:#66d9ef">char</span> value) {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">if</span> (<span style="color:#f92672">!</span><span style="color:#a6e22e">isFull</span>(stack)) {
</span></span><span style="display:flex;"><span>        stack<span style="color:#f92672">-&gt;</span>data[<span style="color:#f92672">++</span>stack<span style="color:#f92672">-&gt;</span>top] <span style="color:#f92672">=</span> value;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">else</span> {
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">printf</span>(<span style="color:#e6db74">&#34;错误:栈已满</span><span style="color:#ae81ff">\n</span><span style="color:#e6db74">&#34;</span>);
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">exit</span>(<span style="color:#ae81ff">1</span>);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">char</span> <span style="color:#a6e22e">pop</span>(Stack<span style="color:#f92672">*</span> stack) {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">if</span> (<span style="color:#f92672">!</span><span style="color:#a6e22e">isEmpty</span>(stack)) {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> stack<span style="color:#f92672">-&gt;</span>data[stack<span style="color:#f92672">-&gt;</span>top<span style="color:#f92672">--</span>];
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">else</span> {
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">printf</span>(<span style="color:#e6db74">&#34;错误:栈为空</span><span style="color:#ae81ff">\n</span><span style="color:#e6db74">&#34;</span>);
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">exit</span>(<span style="color:#ae81ff">1</span>);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">char</span> <span style="color:#a6e22e">peek</span>(Stack<span style="color:#f92672">*</span> stack) {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">if</span> (<span style="color:#f92672">!</span><span style="color:#a6e22e">isEmpty</span>(stack)) {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> stack<span style="color:#f92672">-&gt;</span>data[stack<span style="color:#f92672">-&gt;</span>top];
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">else</span> {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> <span style="color:#e6db74">&#39;\0&#39;</span>;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// 函数声明
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">int</span> <span style="color:#a6e22e">getOperatorPrecedence</span>(<span style="color:#66d9ef">char</span> op);
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">int</span> <span style="color:#a6e22e">isOperator</span>(<span style="color:#66d9ef">char</span> c);
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">void</span> <span style="color:#a6e22e">infixToPostfix</span>(<span style="color:#66d9ef">const</span> <span style="color:#66d9ef">char</span><span style="color:#f92672">*</span> infix, <span style="color:#66d9ef">char</span><span style="color:#f92672">*</span> postfix);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">int</span> <span style="color:#a6e22e">main</span>() {
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">printf</span>(<span style="color:#e6db74">&#34;欢迎使用中缀表达式转后缀表达式程序!</span><span style="color:#ae81ff">\n</span><span style="color:#e6db74">&#34;</span>);
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">printf</span>(<span style="color:#e6db74">&#34;请输入一个中缀表达式,输入&#39;q&#39;退出:</span><span style="color:#ae81ff">\n</span><span style="color:#e6db74">&#34;</span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">while</span> (<span style="color:#ae81ff">1</span>) {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">char</span> infixExpression[<span style="color:#ae81ff">100</span>];
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">fgets</span>(infixExpression, <span style="color:#66d9ef">sizeof</span>(infixExpression), stdin);
</span></span><span style="display:flex;"><span>        infixExpression[<span style="color:#a6e22e">strcspn</span>(infixExpression, <span style="color:#e6db74">&#34;</span><span style="color:#ae81ff">\n</span><span style="color:#e6db74">&#34;</span>)] <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;\0&#39;</span>; <span style="color:#75715e">// 去掉换行符
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">if</span> (<span style="color:#a6e22e">strcmp</span>(infixExpression, <span style="color:#e6db74">&#34;q&#34;</span>) <span style="color:#f92672">==</span> <span style="color:#ae81ff">0</span>) {
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">printf</span>(<span style="color:#e6db74">&#34;感谢使用中缀表达式转后缀表达式程序,再见!</span><span style="color:#ae81ff">\n</span><span style="color:#e6db74">&#34;</span>);
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">break</span>;
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">char</span> postfixExpression[<span style="color:#ae81ff">100</span>];
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">infixToPostfix</span>(infixExpression, postfixExpression);
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">printf</span>(<span style="color:#e6db74">&#34;后缀表达式:%s</span><span style="color:#ae81ff">\n</span><span style="color:#e6db74">&#34;</span>, postfixExpression);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">printf</span>(<span style="color:#e6db74">&#34;请输入另一个中缀表达式,或输入&#39;q&#39;退出:</span><span style="color:#ae81ff">\n</span><span style="color:#e6db74">&#34;</span>);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> <span style="color:#ae81ff">0</span>;
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">int</span> <span style="color:#a6e22e">getOperatorPrecedence</span>(<span style="color:#66d9ef">char</span> op) {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">switch</span> (op) {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">case</span> <span style="color:#e6db74">&#39;+&#39;</span><span style="color:#f92672">:</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">case</span> <span style="color:#e6db74">&#39;-&#39;</span><span style="color:#f92672">:</span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> <span style="color:#ae81ff">1</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">case</span> <span style="color:#e6db74">&#39;*&#39;</span><span style="color:#f92672">:</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">case</span> <span style="color:#e6db74">&#39;/&#39;</span><span style="color:#f92672">:</span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> <span style="color:#ae81ff">2</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">default</span><span style="color:#f92672">:</span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> <span style="color:#ae81ff">0</span>;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">int</span> <span style="color:#a6e22e">isOperator</span>(<span style="color:#66d9ef">char</span> c) {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> c <span style="color:#f92672">==</span> <span style="color:#e6db74">&#39;+&#39;</span> <span style="color:#f92672">||</span> c <span style="color:#f92672">==</span> <span style="color:#e6db74">&#39;-&#39;</span> <span style="color:#f92672">||</span> c <span style="color:#f92672">==</span> <span style="color:#e6db74">&#39;*&#39;</span> <span style="color:#f92672">||</span> c <span style="color:#f92672">==</span> <span style="color:#e6db74">&#39;/&#39;</span>;
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">void</span> <span style="color:#a6e22e">infixToPostfix</span>(<span style="color:#66d9ef">const</span> <span style="color:#66d9ef">char</span><span style="color:#f92672">*</span> infix, <span style="color:#66d9ef">char</span><span style="color:#f92672">*</span> postfix) {
</span></span><span style="display:flex;"><span>    Stack operatorStack;
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">initialize</span>(<span style="color:#f92672">&amp;</span>operatorStack);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">int</span> i <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">int</span> j <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">while</span> (infix[i] <span style="color:#f92672">!=</span> <span style="color:#e6db74">&#39;\0&#39;</span>) {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">if</span> (<span style="color:#a6e22e">isspace</span>(infix[i])) {
</span></span><span style="display:flex;"><span>            i<span style="color:#f92672">++</span>;
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">continue</span>;
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">else</span> <span style="color:#66d9ef">if</span> (<span style="color:#a6e22e">isdigit</span>(infix[i]) <span style="color:#f92672">||</span> <span style="color:#a6e22e">isalpha</span>(infix[i])) {
</span></span><span style="display:flex;"><span>            postfix[j<span style="color:#f92672">++</span>] <span style="color:#f92672">=</span> infix[i];
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">else</span> <span style="color:#66d9ef">if</span> (<span style="color:#a6e22e">isOperator</span>(infix[i])) {
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">while</span> (<span style="color:#f92672">!</span><span style="color:#a6e22e">isEmpty</span>(<span style="color:#f92672">&amp;</span>operatorStack) <span style="color:#f92672">&amp;&amp;</span> <span style="color:#a6e22e">getOperatorPrecedence</span>(<span style="color:#a6e22e">peek</span>(<span style="color:#f92672">&amp;</span>operatorStack)) <span style="color:#f92672">&gt;=</span> <span style="color:#a6e22e">getOperatorPrecedence</span>(infix[i])) {
</span></span><span style="display:flex;"><span>                postfix[j<span style="color:#f92672">++</span>] <span style="color:#f92672">=</span> <span style="color:#a6e22e">pop</span>(<span style="color:#f92672">&amp;</span>operatorStack);
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">push</span>(<span style="color:#f92672">&amp;</span>operatorStack, infix[i]);
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">else</span> <span style="color:#66d9ef">if</span> (infix[i] <span style="color:#f92672">==</span> <span style="color:#e6db74">&#39;(&#39;</span>) {
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">push</span>(<span style="color:#f92672">&amp;</span>operatorStack, infix[i]);
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">else</span> <span style="color:#66d9ef">if</span> (infix[i] <span style="color:#f92672">==</span> <span style="color:#e6db74">&#39;)&#39;</span>) {
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">while</span> (<span style="color:#f92672">!</span><span style="color:#a6e22e">isEmpty</span>(<span style="color:#f92672">&amp;</span>operatorStack) <span style="color:#f92672">&amp;&amp;</span> <span style="color:#a6e22e">peek</span>(<span style="color:#f92672">&amp;</span>operatorStack) <span style="color:#f92672">!=</span> <span style="color:#e6db74">&#39;(&#39;</span>) {
</span></span><span style="display:flex;"><span>                postfix[j<span style="color:#f92672">++</span>] <span style="color:#f92672">=</span> <span style="color:#a6e22e">pop</span>(<span style="color:#f92672">&amp;</span>operatorStack);
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">if</span> (<span style="color:#f92672">!</span><span style="color:#a6e22e">isEmpty</span>(<span style="color:#f92672">&amp;</span>operatorStack) <span style="color:#f92672">&amp;&amp;</span> <span style="color:#a6e22e">peek</span>(<span style="color:#f92672">&amp;</span>operatorStack) <span style="color:#f92672">==</span> <span style="color:#e6db74">&#39;(&#39;</span>) {
</span></span><span style="display:flex;"><span>                <span style="color:#a6e22e">pop</span>(<span style="color:#f92672">&amp;</span>operatorStack); <span style="color:#75715e">// 弹出 &#39;(&#39;
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>            }
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">else</span> {
</span></span><span style="display:flex;"><span>                <span style="color:#a6e22e">printf</span>(<span style="color:#e6db74">&#34;错误:括号不匹配</span><span style="color:#ae81ff">\n</span><span style="color:#e6db74">&#34;</span>);
</span></span><span style="display:flex;"><span>                <span style="color:#a6e22e">exit</span>(<span style="color:#ae81ff">1</span>);
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">else</span> {
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">printf</span>(<span style="color:#e6db74">&#34;错误:无效的字符 &#39;%c&#39;</span><span style="color:#ae81ff">\n</span><span style="color:#e6db74">&#34;</span>, infix[i]);
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">exit</span>(<span style="color:#ae81ff">1</span>);
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        i<span style="color:#f92672">++</span>;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">while</span> (<span style="color:#f92672">!</span><span style="color:#a6e22e">isEmpty</span>(<span style="color:#f92672">&amp;</span>operatorStack)) {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">if</span> (<span style="color:#a6e22e">peek</span>(<span style="color:#f92672">&amp;</span>operatorStack) <span style="color:#f92672">==</span> <span style="color:#e6db74">&#39;(&#39;</span>) {
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">printf</span>(<span style="color:#e6db74">&#34;错误:括号不匹配</span><span style="color:#ae81ff">\n</span><span style="color:#e6db74">&#34;</span>);
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">exit</span>(<span style="color:#ae81ff">1</span>);
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>        postfix[j<span style="color:#f92672">++</span>] <span style="color:#f92672">=</span> <span style="color:#a6e22e">pop</span>(<span style="color:#f92672">&amp;</span>operatorStack);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    postfix[j] <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;\0&#39;</span>; <span style="color:#75715e">// 添加字符串终止符
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>}</span></span></code></pre></div><h2 id="前缀表达式及其求值方法">前缀表达式及其求值方法<a class="anchor" href="#%e5%89%8d%e7%bc%80%e8%a1%a8%e8%be%be%e5%bc%8f%e5%8f%8a%e5%85%b6%e6%b1%82%e5%80%bc%e6%96%b9%e6%b3%95">#</a></h2>
<p>前缀表达式又称为波兰表达式,它的特点是运算符在操作数的前面,如:<code>+1*23</code>、<code>-+1*+2345</code>、<code>+1*2+3*4+56</code> 等等。</p>
<h3 id="前缀表达式的求值方法">前缀表达式的求值方法<a class="anchor" href="#%e5%89%8d%e7%bc%80%e8%a1%a8%e8%be%be%e5%bc%8f%e7%9a%84%e6%b1%82%e5%80%bc%e6%96%b9%e6%b3%95">#</a></h3>
<p>前缀表达式的求值方法是:从右到左遍历表达式的每个数字和符号,遇到是数字就进栈,遇到是符号,就将处于栈顶两个数字出栈,进行运算,运算结果进栈,一直到最终获得结果。</p>
<p>例如:<code>+1*23</code> 的求值过程如下:</p>
<table>
  <thead>
      <tr>
          <th>读入字符</th>
          <th>当前栈</th>
          <th>说明</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td>3</td>
          <td>3</td>
          <td>读入 3,进栈</td>
      </tr>
      <tr>
          <td>2</td>
          <td>3 2</td>
          <td>读入 2,进栈</td>
      </tr>
      <tr>
          <td>*</td>
          <td>6</td>
          <td>读入 *,出栈 2 和 3,计算 2 * 3 = 6,将 6 进栈</td>
      </tr>
      <tr>
          <td>1</td>
          <td>6 1</td>
          <td>读入 1,进栈</td>
      </tr>
      <tr>
          <td>+</td>
          <td>7</td>
          <td>读入 +,出栈 1 和 6,计算 1 + 6 = 7,将 7 进栈</td>
      </tr>
  </tbody>
</table>
<h3 id="c-实现前缀表达式的求值">C++ 实现前缀表达式的求值<a class="anchor" href="#c-%e5%ae%9e%e7%8e%b0%e5%89%8d%e7%bc%80%e8%a1%a8%e8%be%be%e5%bc%8f%e7%9a%84%e6%b1%82%e5%80%bc">#</a></h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#75715e">#include</span> <span style="color:#75715e">&lt;iostream&gt;</span><span style="color:#75715e">
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">#include</span> <span style="color:#75715e">&lt;stack&gt;</span><span style="color:#75715e">
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">#include</span> <span style="color:#75715e">&lt;sstream&gt;</span><span style="color:#75715e">
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">#include</span> <span style="color:#75715e">&lt;vector&gt;</span><span style="color:#75715e">
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">#include</span> <span style="color:#75715e">&lt;cctype&gt;</span><span style="color:#75715e">
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">using</span> <span style="color:#66d9ef">namespace</span> std;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// 函数声明
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">bool</span> <span style="color:#a6e22e">isOperator</span>(<span style="color:#66d9ef">const</span> string<span style="color:#f92672">&amp;</span> token);
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">bool</span> <span style="color:#a6e22e">isNumeric</span>(<span style="color:#66d9ef">const</span> string<span style="color:#f92672">&amp;</span> token);
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">double</span> <span style="color:#a6e22e">evaluatePrefixExpression</span>(<span style="color:#66d9ef">const</span> vector<span style="color:#f92672">&lt;</span>string<span style="color:#f92672">&gt;&amp;</span> tokens);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">int</span> <span style="color:#a6e22e">main</span>() {
</span></span><span style="display:flex;"><span>    cout <span style="color:#f92672">&lt;&lt;</span> <span style="color:#e6db74">&#34;欢迎使用前缀表达式求值程序!&#34;</span> <span style="color:#f92672">&lt;&lt;</span> endl;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">while</span> (true) {
</span></span><span style="display:flex;"><span>        cout <span style="color:#f92672">&lt;&lt;</span> <span style="color:#e6db74">&#34;请输入前缀表达式,操作符和操作数之间用空格分隔,支持+、-、*、/:&#34;</span> <span style="color:#f92672">&lt;&lt;</span> endl;
</span></span><span style="display:flex;"><span>        cout <span style="color:#f92672">&lt;&lt;</span> <span style="color:#e6db74">&#34;输入 q 退出程序&#34;</span> <span style="color:#f92672">&lt;&lt;</span> endl;
</span></span><span style="display:flex;"><span>        string input;
</span></span><span style="display:flex;"><span>        getline(cin, input);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">if</span> (input <span style="color:#f92672">==</span> <span style="color:#e6db74">&#34;q&#34;</span>) {
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">break</span>; <span style="color:#75715e">// 用户输入了&#34;q&#34;,退出程序
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        istringstream iss(input);
</span></span><span style="display:flex;"><span>        vector<span style="color:#f92672">&lt;</span>string<span style="color:#f92672">&gt;</span> tokens;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        string token;
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">while</span> (iss <span style="color:#f92672">&gt;&gt;</span> token) {
</span></span><span style="display:flex;"><span>            tokens.push_back(token);
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">if</span> (tokens.empty()) {
</span></span><span style="display:flex;"><span>            cout <span style="color:#f92672">&lt;&lt;</span> <span style="color:#e6db74">&#34;错误:输入为空,请重新输入表达式。&#34;</span> <span style="color:#f92672">&lt;&lt;</span> endl;
</span></span><span style="display:flex;"><span>            cout <span style="color:#f92672">&lt;&lt;</span> <span style="color:#e6db74">&#34;输入 q 退出程序&#34;</span> <span style="color:#f92672">&lt;&lt;</span> endl;
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">continue</span>; <span style="color:#75715e">// 继续下一次循环
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">double</span> result <span style="color:#f92672">=</span> evaluatePrefixExpression(tokens);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">if</span> (<span style="color:#f92672">!</span>isnan(result)) {
</span></span><span style="display:flex;"><span>            cout <span style="color:#f92672">&lt;&lt;</span> <span style="color:#e6db74">&#34;表达式结果为:&#34;</span> <span style="color:#f92672">&lt;&lt;</span> result <span style="color:#f92672">&lt;&lt;</span> endl;
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">else</span> {
</span></span><span style="display:flex;"><span>            cout <span style="color:#f92672">&lt;&lt;</span> <span style="color:#e6db74">&#34;错误:无法计算表达式结果,请检查表达式是否正确。&#34;</span> <span style="color:#f92672">&lt;&lt;</span> endl;
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    cout <span style="color:#f92672">&lt;&lt;</span> <span style="color:#e6db74">&#34;感谢使用前缀表达式求值程序!&#34;</span> <span style="color:#f92672">&lt;&lt;</span> endl;
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> <span style="color:#ae81ff">0</span>;
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">bool</span> <span style="color:#a6e22e">isOperator</span>(<span style="color:#66d9ef">const</span> string<span style="color:#f92672">&amp;</span> token) {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> (token <span style="color:#f92672">==</span> <span style="color:#e6db74">&#34;+&#34;</span> <span style="color:#f92672">||</span> token <span style="color:#f92672">==</span> <span style="color:#e6db74">&#34;-&#34;</span> <span style="color:#f92672">||</span> token <span style="color:#f92672">==</span> <span style="color:#e6db74">&#34;*&#34;</span> <span style="color:#f92672">||</span> token <span style="color:#f92672">==</span> <span style="color:#e6db74">&#34;/&#34;</span>);
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">bool</span> <span style="color:#a6e22e">isNumeric</span>(<span style="color:#66d9ef">const</span> string<span style="color:#f92672">&amp;</span> token) {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">for</span> (<span style="color:#66d9ef">char</span> c : token) {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">if</span> (<span style="color:#f92672">!</span>isdigit(c) <span style="color:#f92672">&amp;&amp;</span> c <span style="color:#f92672">!=</span> <span style="color:#e6db74">&#39;.&#39;</span> <span style="color:#f92672">&amp;&amp;</span> c <span style="color:#f92672">!=</span> <span style="color:#e6db74">&#39;-&#39;</span>) {
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">return</span> false;
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> true;
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">double</span> <span style="color:#a6e22e">evaluatePrefixExpression</span>(<span style="color:#66d9ef">const</span> vector<span style="color:#f92672">&lt;</span>string<span style="color:#f92672">&gt;&amp;</span> tokens) {
</span></span><span style="display:flex;"><span>    stack<span style="color:#f92672">&lt;</span><span style="color:#66d9ef">double</span><span style="color:#f92672">&gt;</span> operandStack;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">for</span> (<span style="color:#66d9ef">int</span> i <span style="color:#f92672">=</span> tokens.size() <span style="color:#f92672">-</span> <span style="color:#ae81ff">1</span>; i <span style="color:#f92672">&gt;=</span> <span style="color:#ae81ff">0</span>; i<span style="color:#f92672">--</span>) {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">const</span> string<span style="color:#f92672">&amp;</span> token <span style="color:#f92672">=</span> tokens[i];
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">if</span> (isNumeric(token)) {
</span></span><span style="display:flex;"><span>            operandStack.push(stod(token));
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">else</span> <span style="color:#66d9ef">if</span> (isOperator(token)) {
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">if</span> (operandStack.size() <span style="color:#f92672">&lt;</span> <span style="color:#ae81ff">2</span>) {
</span></span><span style="display:flex;"><span>                cout <span style="color:#f92672">&lt;&lt;</span> <span style="color:#e6db74">&#34;错误:操作数不足,无法进行操作。&#34;</span> <span style="color:#f92672">&lt;&lt;</span> endl;
</span></span><span style="display:flex;"><span>                <span style="color:#66d9ef">return</span> NAN;
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">double</span> operand1 <span style="color:#f92672">=</span> operandStack.top();
</span></span><span style="display:flex;"><span>            operandStack.pop();
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">double</span> operand2 <span style="color:#f92672">=</span> operandStack.top();
</span></span><span style="display:flex;"><span>            operandStack.pop();
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">if</span> (token <span style="color:#f92672">==</span> <span style="color:#e6db74">&#34;+&#34;</span>) {
</span></span><span style="display:flex;"><span>                operandStack.push(operand1 <span style="color:#f92672">+</span> operand2);
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">else</span> <span style="color:#66d9ef">if</span> (token <span style="color:#f92672">==</span> <span style="color:#e6db74">&#34;-&#34;</span>) {
</span></span><span style="display:flex;"><span>                operandStack.push(operand1 <span style="color:#f92672">-</span> operand2);
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">else</span> <span style="color:#66d9ef">if</span> (token <span style="color:#f92672">==</span> <span style="color:#e6db74">&#34;*&#34;</span>) {
</span></span><span style="display:flex;"><span>                operandStack.push(operand1 <span style="color:#f92672">*</span> operand2);
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">else</span> <span style="color:#66d9ef">if</span> (token <span style="color:#f92672">==</span> <span style="color:#e6db74">&#34;/&#34;</span>) {
</span></span><span style="display:flex;"><span>                <span style="color:#66d9ef">if</span> (operand2 <span style="color:#f92672">==</span> <span style="color:#ae81ff">0</span>) {
</span></span><span style="display:flex;"><span>                    cout <span style="color:#f92672">&lt;&lt;</span> <span style="color:#e6db74">&#34;错误:除数为零,无法进行除法操作。&#34;</span> <span style="color:#f92672">&lt;&lt;</span> endl;
</span></span><span style="display:flex;"><span>                    <span style="color:#66d9ef">return</span> NAN;
</span></span><span style="display:flex;"><span>                }
</span></span><span style="display:flex;"><span>                operandStack.push(operand1 <span style="color:#f92672">/</span> operand2);
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">else</span> {
</span></span><span style="display:flex;"><span>            cout <span style="color:#f92672">&lt;&lt;</span> <span style="color:#e6db74">&#34;错误:无效的表达式元素 </span><span style="color:#ae81ff">\&#34;</span><span style="color:#e6db74">&#34;</span> <span style="color:#f92672">&lt;&lt;</span> token <span style="color:#f92672">&lt;&lt;</span> <span style="color:#e6db74">&#34;</span><span style="color:#ae81ff">\&#34;</span><span style="color:#e6db74">,请检查表达式是否正确。&#34;</span> <span style="color:#f92672">&lt;&lt;</span> endl;
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">return</span> NAN;
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">if</span> (operandStack.size() <span style="color:#f92672">!=</span> <span style="color:#ae81ff">1</span>) {
</span></span><span style="display:flex;"><span>        cout <span style="color:#f92672">&lt;&lt;</span> <span style="color:#e6db74">&#34;错误:操作数和操作符数量不匹配,无法计算表达式结果。&#34;</span> <span style="color:#f92672">&lt;&lt;</span> endl;
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> NAN;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> operandStack.top();
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div><h3 id="c-实现前缀表达式的求值-1">C 实现前缀表达式的求值<a class="anchor" href="#c-%e5%ae%9e%e7%8e%b0%e5%89%8d%e7%bc%80%e8%a1%a8%e8%be%be%e5%bc%8f%e7%9a%84%e6%b1%82%e5%80%bc-1">#</a></h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c" data-lang="c"><span style="display:flex;"><span><span style="color:#75715e">#include</span> <span style="color:#75715e">&lt;stdio.h&gt;</span><span style="color:#75715e">
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">#include</span> <span style="color:#75715e">&lt;stdlib.h&gt;</span><span style="color:#75715e">
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">#include</span> <span style="color:#75715e">&lt;string.h&gt;</span><span style="color:#75715e">
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">#include</span> <span style="color:#75715e">&lt;stdbool.h&gt;</span><span style="color:#75715e">
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">#include</span> <span style="color:#75715e">&lt;ctype.h&gt;</span><span style="color:#75715e">
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">#include</span> <span style="color:#75715e">&lt;math.h&gt;</span><span style="color:#75715e">
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#define MAX_EXPRESSION_SIZE 100
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">#pragma warning(disable : 4996)
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// 函数声明
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">bool</span> <span style="color:#a6e22e">isOperator</span>(<span style="color:#66d9ef">const</span> <span style="color:#66d9ef">char</span> token);
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">bool</span> <span style="color:#a6e22e">isNumeric</span>(<span style="color:#66d9ef">const</span> <span style="color:#66d9ef">char</span><span style="color:#f92672">*</span> token);
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">double</span> <span style="color:#a6e22e">evaluatePrefixExpression</span>(<span style="color:#66d9ef">const</span> <span style="color:#66d9ef">char</span><span style="color:#f92672">**</span> tokens, <span style="color:#66d9ef">int</span> numTokens);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">int</span> <span style="color:#a6e22e">main</span>() {
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">printf</span>(<span style="color:#e6db74">&#34;欢迎使用前缀表达式求值程序!</span><span style="color:#ae81ff">\n</span><span style="color:#e6db74">&#34;</span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">while</span> (<span style="color:#ae81ff">1</span>) {
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">printf</span>(<span style="color:#e6db74">&#34;请输入前缀表达式,操作符和操作数之间用空格分隔,支持+、-、*、/:</span><span style="color:#ae81ff">\n</span><span style="color:#e6db74">&#34;</span>);
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">printf</span>(<span style="color:#e6db74">&#34;输入 q 退出程序。</span><span style="color:#ae81ff">\n</span><span style="color:#e6db74">&#34;</span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">char</span> input[MAX_EXPRESSION_SIZE];
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">fgets</span>(input, <span style="color:#66d9ef">sizeof</span>(input), stdin);
</span></span><span style="display:flex;"><span>        input[<span style="color:#a6e22e">strcspn</span>(input, <span style="color:#e6db74">&#34;</span><span style="color:#ae81ff">\n</span><span style="color:#e6db74">&#34;</span>)] <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;\0&#39;</span>; <span style="color:#75715e">// 移除末尾的换行符
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">if</span> (<span style="color:#a6e22e">strcmp</span>(input, <span style="color:#e6db74">&#34;q&#34;</span>) <span style="color:#f92672">==</span> <span style="color:#ae81ff">0</span>) {
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">break</span>; <span style="color:#75715e">// 用户输入了&#34;q&#34;,退出程序
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">const</span> <span style="color:#66d9ef">char</span><span style="color:#f92672">*</span> delimiters <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34; &#34;</span>;
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">char</span><span style="color:#f92672">*</span> token <span style="color:#f92672">=</span> <span style="color:#a6e22e">strtok</span>(input, delimiters);
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">const</span> <span style="color:#66d9ef">char</span><span style="color:#f92672">*</span> tokens[MAX_EXPRESSION_SIZE];
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">int</span> numTokens <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">while</span> (token <span style="color:#f92672">!=</span> NULL <span style="color:#f92672">&amp;&amp;</span> numTokens <span style="color:#f92672">&lt;</span> MAX_EXPRESSION_SIZE) {
</span></span><span style="display:flex;"><span>            tokens[numTokens] <span style="color:#f92672">=</span> token;
</span></span><span style="display:flex;"><span>            numTokens<span style="color:#f92672">++</span>;
</span></span><span style="display:flex;"><span>            token <span style="color:#f92672">=</span> <span style="color:#a6e22e">strtok</span>(NULL, delimiters);
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">if</span> (numTokens <span style="color:#f92672">==</span> <span style="color:#ae81ff">0</span>) {
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">printf</span>(<span style="color:#e6db74">&#34;错误:输入为空,请重新输入表达式。</span><span style="color:#ae81ff">\n</span><span style="color:#e6db74">&#34;</span>);
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">printf</span>(<span style="color:#e6db74">&#34;输入 q 退出程序。</span><span style="color:#ae81ff">\n</span><span style="color:#e6db74">&#34;</span>);
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">continue</span>; <span style="color:#75715e">// 继续下一次循环
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">double</span> result <span style="color:#f92672">=</span> <span style="color:#a6e22e">evaluatePrefixExpression</span>(tokens, numTokens);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">if</span> (<span style="color:#f92672">!</span><span style="color:#a6e22e">isnan</span>(result)) {
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">printf</span>(<span style="color:#e6db74">&#34;表达式结果为:%g</span><span style="color:#ae81ff">\n</span><span style="color:#e6db74">&#34;</span>, result);
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">else</span> {
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">printf</span>(<span style="color:#e6db74">&#34;错误:无法计算表达式结果,请检查表达式是否正确。</span><span style="color:#ae81ff">\n</span><span style="color:#e6db74">&#34;</span>);
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">printf</span>(<span style="color:#e6db74">&#34;感谢使用前缀表达式求值程序!</span><span style="color:#ae81ff">\n</span><span style="color:#e6db74">&#34;</span>);
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> <span style="color:#ae81ff">0</span>;
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">bool</span> <span style="color:#a6e22e">isOperator</span>(<span style="color:#66d9ef">const</span> <span style="color:#66d9ef">char</span> token) {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> (token <span style="color:#f92672">==</span> <span style="color:#e6db74">&#39;+&#39;</span> <span style="color:#f92672">||</span> token <span style="color:#f92672">==</span> <span style="color:#e6db74">&#39;-&#39;</span> <span style="color:#f92672">||</span> token <span style="color:#f92672">==</span> <span style="color:#e6db74">&#39;*&#39;</span> <span style="color:#f92672">||</span> token <span style="color:#f92672">==</span> <span style="color:#e6db74">&#39;/&#39;</span>);
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">bool</span> <span style="color:#a6e22e">isNumeric</span>(<span style="color:#66d9ef">const</span> <span style="color:#66d9ef">char</span><span style="color:#f92672">*</span> token) {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">for</span> (<span style="color:#66d9ef">int</span> i <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>; token[i] <span style="color:#f92672">!=</span> <span style="color:#e6db74">&#39;\0&#39;</span>; i<span style="color:#f92672">++</span>) {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">if</span> (<span style="color:#f92672">!</span><span style="color:#a6e22e">isdigit</span>(token[i]) <span style="color:#f92672">&amp;&amp;</span> token[i] <span style="color:#f92672">!=</span> <span style="color:#e6db74">&#39;.&#39;</span> <span style="color:#f92672">&amp;&amp;</span> token[i] <span style="color:#f92672">!=</span> <span style="color:#e6db74">&#39;-&#39;</span>) {
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">return</span> false;
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> true;
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">double</span> <span style="color:#a6e22e">evaluatePrefixExpression</span>(<span style="color:#66d9ef">const</span> <span style="color:#66d9ef">char</span><span style="color:#f92672">**</span> tokens, <span style="color:#66d9ef">int</span> numTokens) {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">double</span> operandStack[MAX_EXPRESSION_SIZE];
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">int</span> top <span style="color:#f92672">=</span> <span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">for</span> (<span style="color:#66d9ef">int</span> i <span style="color:#f92672">=</span> numTokens <span style="color:#f92672">-</span> <span style="color:#ae81ff">1</span>; i <span style="color:#f92672">&gt;=</span> <span style="color:#ae81ff">0</span>; i<span style="color:#f92672">--</span>) {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">const</span> <span style="color:#66d9ef">char</span><span style="color:#f92672">*</span> token <span style="color:#f92672">=</span> tokens[i];
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">if</span> (<span style="color:#a6e22e">isNumeric</span>(token)) {
</span></span><span style="display:flex;"><span>            operandStack[<span style="color:#f92672">++</span>top] <span style="color:#f92672">=</span> <span style="color:#a6e22e">atof</span>(token);
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">else</span> <span style="color:#66d9ef">if</span> (<span style="color:#a6e22e">isOperator</span>(token[<span style="color:#ae81ff">0</span>])) {
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">if</span> (top <span style="color:#f92672">&lt;</span> <span style="color:#ae81ff">1</span>) {
</span></span><span style="display:flex;"><span>                <span style="color:#a6e22e">printf</span>(<span style="color:#e6db74">&#34;错误:操作数不足,无法进行操作。</span><span style="color:#ae81ff">\n</span><span style="color:#e6db74">&#34;</span>);
</span></span><span style="display:flex;"><span>                <span style="color:#66d9ef">return</span> NAN;
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">double</span> operand1 <span style="color:#f92672">=</span> operandStack[top<span style="color:#f92672">--</span>];
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">double</span> operand2 <span style="color:#f92672">=</span> operandStack[top<span style="color:#f92672">--</span>];
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">switch</span> (token[<span style="color:#ae81ff">0</span>]) {
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">case</span> <span style="color:#e6db74">&#39;+&#39;</span><span style="color:#f92672">:</span>
</span></span><span style="display:flex;"><span>                operandStack[<span style="color:#f92672">++</span>top] <span style="color:#f92672">=</span> operand1 <span style="color:#f92672">+</span> operand2;
</span></span><span style="display:flex;"><span>                <span style="color:#66d9ef">break</span>;
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">case</span> <span style="color:#e6db74">&#39;-&#39;</span><span style="color:#f92672">:</span>
</span></span><span style="display:flex;"><span>                operandStack[<span style="color:#f92672">++</span>top] <span style="color:#f92672">=</span> operand1 <span style="color:#f92672">-</span> operand2;
</span></span><span style="display:flex;"><span>                <span style="color:#66d9ef">break</span>;
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">case</span> <span style="color:#e6db74">&#39;*&#39;</span><span style="color:#f92672">:</span>
</span></span><span style="display:flex;"><span>                operandStack[<span style="color:#f92672">++</span>top] <span style="color:#f92672">=</span> operand1 <span style="color:#f92672">*</span> operand2;
</span></span><span style="display:flex;"><span>                <span style="color:#66d9ef">break</span>;
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">case</span> <span style="color:#e6db74">&#39;/&#39;</span><span style="color:#f92672">:</span>
</span></span><span style="display:flex;"><span>                <span style="color:#66d9ef">if</span> (operand2 <span style="color:#f92672">==</span> <span style="color:#ae81ff">0</span>) {
</span></span><span style="display:flex;"><span>                    <span style="color:#a6e22e">printf</span>(<span style="color:#e6db74">&#34;错误:除数为零,无法进行除法操作。</span><span style="color:#ae81ff">\n</span><span style="color:#e6db74">&#34;</span>);
</span></span><span style="display:flex;"><span>                    <span style="color:#66d9ef">return</span> NAN;
</span></span><span style="display:flex;"><span>                }
</span></span><span style="display:flex;"><span>                operandStack[<span style="color:#f92672">++</span>top] <span style="color:#f92672">=</span> operand1 <span style="color:#f92672">/</span> operand2;
</span></span><span style="display:flex;"><span>                <span style="color:#66d9ef">break</span>;
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">default</span><span style="color:#f92672">:</span>
</span></span><span style="display:flex;"><span>                <span style="color:#a6e22e">printf</span>(<span style="color:#e6db74">&#34;错误:无效的操作符 </span><span style="color:#ae81ff">\&#34;</span><span style="color:#e6db74">%s</span><span style="color:#ae81ff">\&#34;</span><span style="color:#e6db74">,请检查表达式是否正确。</span><span style="color:#ae81ff">\n</span><span style="color:#e6db74">&#34;</span>, token);
</span></span><span style="display:flex;"><span>                <span style="color:#66d9ef">return</span> NAN;
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">else</span> {
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">printf</span>(<span style="color:#e6db74">&#34;错误:无效的表达式元素 </span><span style="color:#ae81ff">\&#34;</span><span style="color:#e6db74">%s</span><span style="color:#ae81ff">\&#34;</span><span style="color:#e6db74">,请检查表达式是否正确。</span><span style="color:#ae81ff">\n</span><span style="color:#e6db74">&#34;</span>, token);
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">return</span> NAN;
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">if</span> (top <span style="color:#f92672">!=</span> <span style="color:#ae81ff">0</span>) {
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">printf</span>(<span style="color:#e6db74">&#34;错误:操作数和操作符数量不匹配,无法计算表达式结果。</span><span style="color:#ae81ff">\n</span><span style="color:#e6db74">&#34;</span>);
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> NAN;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> operandStack[top];
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div><h3 id="前缀表达式的转换方法中缀转前缀">前缀表达式的转换方法(中缀转前缀)<a class="anchor" href="#%e5%89%8d%e7%bc%80%e8%a1%a8%e8%be%be%e5%bc%8f%e7%9a%84%e8%bd%ac%e6%8d%a2%e6%96%b9%e6%b3%95%e4%b8%ad%e7%bc%80%e8%bd%ac%e5%89%8d%e7%bc%80">#</a></h3>
<p>将中缀表达式转换为前缀表达式的方法是:从右到左遍历中缀表达式的每个数字和符号,若是数字就输出,若是符号,则判断其与栈顶符号的优先级,是右括号或优先级不高于栈顶符号(乘除优先加减)则栈顶元素依次出栈并输出,并将当前符号进栈,一直到最终输出前缀表达式为止。</p>
<p>例如:<code>1+(2+3)*4-5</code> 的转换过程如下:</p>
<table>
  <thead>
      <tr>
          <th>读入字符</th>
          <th>当前栈</th>
          <th>说明</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td>5</td>
          <td>5</td>
          <td>读入 5,进栈</td>
      </tr>
      <tr>
          <td>-</td>
          <td>-</td>
          <td>读入 -,进栈</td>
      </tr>
      <tr>
          <td>4</td>
          <td>- 4</td>
          <td>读入 4,进栈</td>
      </tr>
      <tr>
          <td>*</td>
          <td>*</td>
          <td>读入 *,进栈</td>
      </tr>
      <tr>
          <td>+</td>
          <td>+</td>
          <td>读入 +,进栈</td>
      </tr>
      <tr>
          <td>3</td>
          <td>+ 3</td>
          <td>读入 3,进栈</td>
      </tr>
      <tr>
          <td>+</td>
          <td>+</td>
          <td>读入 +,进栈</td>
      </tr>
      <tr>
          <td>2</td>
          <td>+ 2</td>
          <td>读入 2,进栈</td>
      </tr>
      <tr>
          <td>(</td>
          <td>+ (</td>
          <td>读入 (,进栈</td>
      </tr>
      <tr>
          <td>1</td>
          <td>+ ( 1</td>
          <td>读入 1,输出</td>
      </tr>
      <tr>
          <td>空</td>
          <td>+</td>
          <td>依次出栈 + 和 (,输出</td>
      </tr>
  </tbody>
</table>
<p>转换后的前缀表达式为:<code>-*+12345</code>。</p>
<h3 id="c-实现中缀表达式转前缀表达式">C++ 实现中缀表达式转前缀表达式<a class="anchor" href="#c-%e5%ae%9e%e7%8e%b0%e4%b8%ad%e7%bc%80%e8%a1%a8%e8%be%be%e5%bc%8f%e8%bd%ac%e5%89%8d%e7%bc%80%e8%a1%a8%e8%be%be%e5%bc%8f">#</a></h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#75715e">#include</span> <span style="color:#75715e">&lt;iostream&gt;</span><span style="color:#75715e">
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">#include</span> <span style="color:#75715e">&lt;stack&gt;</span><span style="color:#75715e">
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">#include</span> <span style="color:#75715e">&lt;string&gt;</span><span style="color:#75715e">
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">#include</span> <span style="color:#75715e">&lt;algorithm&gt;</span><span style="color:#75715e">
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">using</span> <span style="color:#66d9ef">namespace</span> std;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// 函数声明
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">int</span> <span style="color:#a6e22e">getOperatorPrecedence</span>(<span style="color:#66d9ef">char</span> op);
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">bool</span> <span style="color:#a6e22e">isOperator</span>(<span style="color:#66d9ef">char</span> token);
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">bool</span> <span style="color:#a6e22e">isOperand</span>(<span style="color:#66d9ef">char</span> token);
</span></span><span style="display:flex;"><span>string <span style="color:#a6e22e">infixToPrefix</span>(<span style="color:#66d9ef">const</span> string<span style="color:#f92672">&amp;</span> infixExpression);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">int</span> <span style="color:#a6e22e">main</span>() {
</span></span><span style="display:flex;"><span>    cout <span style="color:#f92672">&lt;&lt;</span> <span style="color:#e6db74">&#34;欢迎使用中缀表达式转前缀表达式程序!&#34;</span> <span style="color:#f92672">&lt;&lt;</span> endl;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">while</span> (true) {
</span></span><span style="display:flex;"><span>        cout <span style="color:#f92672">&lt;&lt;</span> <span style="color:#e6db74">&#34;请输入中缀表达式或输入 &#39;q&#39; 退出:&#34;</span> <span style="color:#f92672">&lt;&lt;</span> endl;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        string input;
</span></span><span style="display:flex;"><span>        getline(cin, input);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">if</span> (input <span style="color:#f92672">==</span> <span style="color:#e6db74">&#34;q&#34;</span>) {
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">break</span>; <span style="color:#75715e">// 用户输入了&#39;q&#39;,退出程序
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        string prefixExpression <span style="color:#f92672">=</span> infixToPrefix(input);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">if</span> (<span style="color:#f92672">!</span>prefixExpression.empty()) {
</span></span><span style="display:flex;"><span>            cout <span style="color:#f92672">&lt;&lt;</span> <span style="color:#e6db74">&#34;前缀表达式为:&#34;</span> <span style="color:#f92672">&lt;&lt;</span> prefixExpression <span style="color:#f92672">&lt;&lt;</span> endl;
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">else</span> {
</span></span><span style="display:flex;"><span>            cout <span style="color:#f92672">&lt;&lt;</span> <span style="color:#e6db74">&#34;错误:无法转换表达式,请检查表达式是否正确。&#34;</span> <span style="color:#f92672">&lt;&lt;</span> endl;
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    cout <span style="color:#f92672">&lt;&lt;</span> <span style="color:#e6db74">&#34;感谢使用中缀表达式转前缀表达式程序!&#34;</span> <span style="color:#f92672">&lt;&lt;</span> endl;
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> <span style="color:#ae81ff">0</span>;
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">int</span> <span style="color:#a6e22e">getOperatorPrecedence</span>(<span style="color:#66d9ef">char</span> op) {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">switch</span> (op) {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">case</span> <span style="color:#e6db74">&#39;+&#39;</span><span style="color:#f92672">:</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">case</span> <span style="color:#e6db74">&#39;-&#39;</span><span style="color:#f92672">:</span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> <span style="color:#ae81ff">1</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">case</span> <span style="color:#e6db74">&#39;*&#39;</span><span style="color:#f92672">:</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">case</span> <span style="color:#e6db74">&#39;/&#39;</span><span style="color:#f92672">:</span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> <span style="color:#ae81ff">2</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">default</span><span style="color:#f92672">:</span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> <span style="color:#ae81ff">0</span>;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">bool</span> <span style="color:#a6e22e">isOperator</span>(<span style="color:#66d9ef">char</span> token) {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> (token <span style="color:#f92672">==</span> <span style="color:#e6db74">&#39;+&#39;</span> <span style="color:#f92672">||</span> token <span style="color:#f92672">==</span> <span style="color:#e6db74">&#39;-&#39;</span> <span style="color:#f92672">||</span> token <span style="color:#f92672">==</span> <span style="color:#e6db74">&#39;*&#39;</span> <span style="color:#f92672">||</span> token <span style="color:#f92672">==</span> <span style="color:#e6db74">&#39;/&#39;</span>);
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">bool</span> <span style="color:#a6e22e">isOperand</span>(<span style="color:#66d9ef">char</span> token) {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> isalnum(token);
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>string <span style="color:#a6e22e">infixToPrefix</span>(<span style="color:#66d9ef">const</span> string<span style="color:#f92672">&amp;</span> infixExpression) {
</span></span><span style="display:flex;"><span>    string prefixExpression;
</span></span><span style="display:flex;"><span>    stack<span style="color:#f92672">&lt;</span><span style="color:#66d9ef">char</span><span style="color:#f92672">&gt;</span> operatorStack;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// 反转中缀表达式,方便从右到左处理
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    string reversedInfix <span style="color:#f92672">=</span> infixExpression;
</span></span><span style="display:flex;"><span>    reverse(reversedInfix.begin(), reversedInfix.end());
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">for</span> (<span style="color:#66d9ef">char</span> token : reversedInfix) {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">if</span> (isOperand(token)) {
</span></span><span style="display:flex;"><span>            prefixExpression <span style="color:#f92672">=</span> token <span style="color:#f92672">+</span> prefixExpression;
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">else</span> <span style="color:#66d9ef">if</span> (isOperator(token)) {
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">while</span> (<span style="color:#f92672">!</span>operatorStack.empty() <span style="color:#f92672">&amp;&amp;</span> getOperatorPrecedence(token) <span style="color:#f92672">&lt;</span> getOperatorPrecedence(operatorStack.top())) {
</span></span><span style="display:flex;"><span>                prefixExpression <span style="color:#f92672">=</span> operatorStack.top() <span style="color:#f92672">+</span> prefixExpression;
</span></span><span style="display:flex;"><span>                operatorStack.pop();
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>            operatorStack.push(token);
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">else</span> <span style="color:#66d9ef">if</span> (token <span style="color:#f92672">==</span> <span style="color:#e6db74">&#39;)&#39;</span>) {
</span></span><span style="display:flex;"><span>            operatorStack.push(token);
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">else</span> <span style="color:#66d9ef">if</span> (token <span style="color:#f92672">==</span> <span style="color:#e6db74">&#39;(&#39;</span>) {
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">while</span> (<span style="color:#f92672">!</span>operatorStack.empty() <span style="color:#f92672">&amp;&amp;</span> operatorStack.top() <span style="color:#f92672">!=</span> <span style="color:#e6db74">&#39;)&#39;</span>) {
</span></span><span style="display:flex;"><span>                prefixExpression <span style="color:#f92672">=</span> operatorStack.top() <span style="color:#f92672">+</span> prefixExpression;
</span></span><span style="display:flex;"><span>                operatorStack.pop();
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">if</span> (<span style="color:#f92672">!</span>operatorStack.empty()) {
</span></span><span style="display:flex;"><span>                operatorStack.pop(); <span style="color:#75715e">// 弹出匹配的右括号
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>            }
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">else</span> {
</span></span><span style="display:flex;"><span>                <span style="color:#66d9ef">return</span> <span style="color:#e6db74">&#34;&#34;</span>; <span style="color:#75715e">// 括号不匹配
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>            }
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">while</span> (<span style="color:#f92672">!</span>operatorStack.empty()) {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">if</span> (operatorStack.top() <span style="color:#f92672">==</span> <span style="color:#e6db74">&#39;(&#39;</span> <span style="color:#f92672">||</span> operatorStack.top() <span style="color:#f92672">==</span> <span style="color:#e6db74">&#39;)&#39;</span>) {
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">return</span> <span style="color:#e6db74">&#34;&#34;</span>; <span style="color:#75715e">// 括号不匹配
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        }
</span></span><span style="display:flex;"><span>        prefixExpression <span style="color:#f92672">=</span> operatorStack.top() <span style="color:#f92672">+</span> prefixExpression;
</span></span><span style="display:flex;"><span>        operatorStack.pop();
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> prefixExpression;
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div><h3 id="c-实现中缀表达式转前缀表达式-1">C 实现中缀表达式转前缀表达式<a class="anchor" href="#c-%e5%ae%9e%e7%8e%b0%e4%b8%ad%e7%bc%80%e8%a1%a8%e8%be%be%e5%bc%8f%e8%bd%ac%e5%89%8d%e7%bc%80%e8%a1%a8%e8%be%be%e5%bc%8f-1">#</a></h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c" data-lang="c"><span style="display:flex;"><span><span style="color:#75715e">#include</span> <span style="color:#75715e">&lt;stdio.h&gt;</span><span style="color:#75715e">
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">#include</span> <span style="color:#75715e">&lt;stdlib.h&gt;</span><span style="color:#75715e">
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">#include</span> <span style="color:#75715e">&lt;string.h&gt;</span><span style="color:#75715e">
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">#include</span> <span style="color:#75715e">&lt;stdbool.h&gt;</span><span style="color:#75715e">
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#define MAX_SIZE 100
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">#pragma warning(disable : 4996)
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">typedef</span> <span style="color:#66d9ef">struct</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">char</span> arr[MAX_SIZE];
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">int</span> top;
</span></span><span style="display:flex;"><span>} Stack;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">void</span> <span style="color:#a6e22e">initStack</span>(Stack<span style="color:#f92672">*</span> s) {
</span></span><span style="display:flex;"><span>    s<span style="color:#f92672">-&gt;</span>top <span style="color:#f92672">=</span> <span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>;
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">bool</span> <span style="color:#a6e22e">isEmpty</span>(Stack s) {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> s.top <span style="color:#f92672">==</span> <span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>;
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">bool</span> <span style="color:#a6e22e">isFull</span>(Stack s) {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> s.top <span style="color:#f92672">==</span> MAX_SIZE <span style="color:#f92672">-</span> <span style="color:#ae81ff">1</span>;
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">void</span> <span style="color:#a6e22e">push</span>(Stack<span style="color:#f92672">*</span> s, <span style="color:#66d9ef">char</span> ch) {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">if</span> (<span style="color:#a6e22e">isFull</span>(<span style="color:#f92672">*</span>s)) {
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">printf</span>(<span style="color:#e6db74">&#34;Stack overflow!</span><span style="color:#ae81ff">\n</span><span style="color:#e6db74">&#34;</span>);
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">exit</span>(<span style="color:#ae81ff">1</span>);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    s<span style="color:#f92672">-&gt;</span>arr[<span style="color:#f92672">++</span>(s<span style="color:#f92672">-&gt;</span>top)] <span style="color:#f92672">=</span> ch;
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">char</span> <span style="color:#a6e22e">pop</span>(Stack<span style="color:#f92672">*</span> s) {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">if</span> (<span style="color:#a6e22e">isEmpty</span>(<span style="color:#f92672">*</span>s)) {
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">printf</span>(<span style="color:#e6db74">&#34;Stack underflow!</span><span style="color:#ae81ff">\n</span><span style="color:#e6db74">&#34;</span>);
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">exit</span>(<span style="color:#ae81ff">1</span>);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> s<span style="color:#f92672">-&gt;</span>arr[(s<span style="color:#f92672">-&gt;</span>top)<span style="color:#f92672">--</span>];
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">char</span> <span style="color:#a6e22e">peek</span>(Stack s) {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> s.arr[s.top];
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">bool</span> <span style="color:#a6e22e">isOperator</span>(<span style="color:#66d9ef">char</span> ch) {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> ch <span style="color:#f92672">==</span> <span style="color:#e6db74">&#39;+&#39;</span> <span style="color:#f92672">||</span> ch <span style="color:#f92672">==</span> <span style="color:#e6db74">&#39;-&#39;</span> <span style="color:#f92672">||</span> ch <span style="color:#f92672">==</span> <span style="color:#e6db74">&#39;*&#39;</span> <span style="color:#f92672">||</span> ch <span style="color:#f92672">==</span> <span style="color:#e6db74">&#39;/&#39;</span>;
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">int</span> <span style="color:#a6e22e">precedence</span>(<span style="color:#66d9ef">char</span> ch) {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">switch</span> (ch) {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">case</span> <span style="color:#e6db74">&#39;+&#39;</span><span style="color:#f92672">:</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">case</span> <span style="color:#e6db74">&#39;-&#39;</span><span style="color:#f92672">:</span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> <span style="color:#ae81ff">1</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">case</span> <span style="color:#e6db74">&#39;*&#39;</span><span style="color:#f92672">:</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">case</span> <span style="color:#e6db74">&#39;/&#39;</span><span style="color:#f92672">:</span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> <span style="color:#ae81ff">2</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">default</span><span style="color:#f92672">:</span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> <span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">void</span> <span style="color:#a6e22e">infixToPrefix</span>(<span style="color:#66d9ef">char</span><span style="color:#f92672">*</span> infix, <span style="color:#66d9ef">char</span><span style="color:#f92672">*</span> prefix) {
</span></span><span style="display:flex;"><span>    Stack operators;
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">initStack</span>(<span style="color:#f92672">&amp;</span>operators);
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">int</span> j <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">for</span> (<span style="color:#66d9ef">int</span> i <span style="color:#f92672">=</span> <span style="color:#a6e22e">strlen</span>(infix) <span style="color:#f92672">-</span> <span style="color:#ae81ff">1</span>; i <span style="color:#f92672">&gt;=</span> <span style="color:#ae81ff">0</span>; i<span style="color:#f92672">--</span>) {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">char</span> ch <span style="color:#f92672">=</span> infix[i];
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">if</span> ((ch <span style="color:#f92672">&gt;=</span> <span style="color:#e6db74">&#39;0&#39;</span> <span style="color:#f92672">&amp;&amp;</span> ch <span style="color:#f92672">&lt;=</span> <span style="color:#e6db74">&#39;9&#39;</span>) <span style="color:#f92672">||</span> (ch <span style="color:#f92672">&gt;=</span> <span style="color:#e6db74">&#39;a&#39;</span> <span style="color:#f92672">&amp;&amp;</span> ch <span style="color:#f92672">&lt;=</span> <span style="color:#e6db74">&#39;z&#39;</span>) <span style="color:#f92672">||</span> (ch <span style="color:#f92672">&gt;=</span> <span style="color:#e6db74">&#39;A&#39;</span> <span style="color:#f92672">&amp;&amp;</span> ch <span style="color:#f92672">&lt;=</span> <span style="color:#e6db74">&#39;Z&#39;</span>)) {
</span></span><span style="display:flex;"><span>            prefix[j<span style="color:#f92672">++</span>] <span style="color:#f92672">=</span> ch;
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">else</span> <span style="color:#66d9ef">if</span> (ch <span style="color:#f92672">==</span> <span style="color:#e6db74">&#39;)&#39;</span>) {
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">push</span>(<span style="color:#f92672">&amp;</span>operators, ch);
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">else</span> <span style="color:#66d9ef">if</span> (ch <span style="color:#f92672">==</span> <span style="color:#e6db74">&#39;(&#39;</span>) {
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">while</span> (<span style="color:#f92672">!</span><span style="color:#a6e22e">isEmpty</span>(operators) <span style="color:#f92672">&amp;&amp;</span> <span style="color:#a6e22e">peek</span>(operators) <span style="color:#f92672">!=</span> <span style="color:#e6db74">&#39;)&#39;</span>) {
</span></span><span style="display:flex;"><span>                prefix[j<span style="color:#f92672">++</span>] <span style="color:#f92672">=</span> <span style="color:#a6e22e">pop</span>(<span style="color:#f92672">&amp;</span>operators);
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">if</span> (<span style="color:#f92672">!</span><span style="color:#a6e22e">isEmpty</span>(operators) <span style="color:#f92672">&amp;&amp;</span> <span style="color:#a6e22e">peek</span>(operators) <span style="color:#f92672">==</span> <span style="color:#e6db74">&#39;)&#39;</span>) {
</span></span><span style="display:flex;"><span>                <span style="color:#a6e22e">pop</span>(<span style="color:#f92672">&amp;</span>operators);
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">else</span> <span style="color:#66d9ef">if</span> (<span style="color:#a6e22e">isOperator</span>(ch)) {
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">while</span> (<span style="color:#f92672">!</span><span style="color:#a6e22e">isEmpty</span>(operators) <span style="color:#f92672">&amp;&amp;</span> <span style="color:#a6e22e">precedence</span>(ch) <span style="color:#f92672">&lt;=</span> <span style="color:#a6e22e">precedence</span>(<span style="color:#a6e22e">peek</span>(operators))) {
</span></span><span style="display:flex;"><span>                prefix[j<span style="color:#f92672">++</span>] <span style="color:#f92672">=</span> <span style="color:#a6e22e">pop</span>(<span style="color:#f92672">&amp;</span>operators);
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">push</span>(<span style="color:#f92672">&amp;</span>operators, ch);
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">while</span> (<span style="color:#f92672">!</span><span style="color:#a6e22e">isEmpty</span>(operators)) {
</span></span><span style="display:flex;"><span>        prefix[j<span style="color:#f92672">++</span>] <span style="color:#f92672">=</span> <span style="color:#a6e22e">pop</span>(<span style="color:#f92672">&amp;</span>operators);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    prefix[j] <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;\0&#39;</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">_strrev</span>(prefix);
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">int</span> <span style="color:#a6e22e">main</span>() {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">char</span> infix[MAX_SIZE], prefix[MAX_SIZE];
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">while</span> (<span style="color:#ae81ff">1</span>) {
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">printf</span>(<span style="color:#e6db74">&#34;请输入中缀表达式[不要留空格] (输入q退出): &#34;</span>);
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">scanf</span>(<span style="color:#e6db74">&#34;%s&#34;</span>, infix);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">if</span> (<span style="color:#a6e22e">strcmp</span>(infix, <span style="color:#e6db74">&#34;q&#34;</span>) <span style="color:#f92672">==</span> <span style="color:#ae81ff">0</span>) {
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">printf</span>(<span style="color:#e6db74">&#34;退出计算器。</span><span style="color:#ae81ff">\n</span><span style="color:#e6db74">&#34;</span>);
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">break</span>;
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">infixToPrefix</span>(infix, prefix);
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">printf</span>(<span style="color:#e6db74">&#34;前缀表达式: %s</span><span style="color:#ae81ff">\n</span><span style="color:#e6db74">&#34;</span>, prefix);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> <span style="color:#ae81ff">0</span>;
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div></article>
 
      

      <footer class="book-footer">
        
  <div class="flex flex-wrap justify-between">

<div>

</div>

<div>

</div>

</div>





  
  
  


 
        
  
  <div class="book-comments">
<div id="disqus_thread"></div>
<script>
    window.disqus_config = function () {
    
    
    
    };
    (function() {
        if (["localhost", "127.0.0.1"].indexOf(window.location.hostname) != -1) {
            document.getElementById('disqus_thread').innerHTML = 'Disqus comments not available by default when the website is previewed locally.';
            return;
        }
        var d = document, s = d.createElement('script'); s.async = true;
        s.src = '//' + "rdququ's Blog" + '.disqus.com/embed.js';
        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="https://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
</div>
  
 
        
        
  
 
        
  
  
    <script>(function(){document.querySelectorAll("pre:has(code)").forEach(e=>{e.addEventListener("click",e.focus),e.addEventListener("copy",function(t){if(t.preventDefault(),navigator.clipboard){const t=window.getSelection().toString()||e.textContent;navigator.clipboard.writeText(t)}})})})()</script>
  

      </footer>

      <label for="menu-control" class="hidden book-menu-overlay"></label>
    </div>

    
  
  <aside class="book-toc">
    <div class="book-toc-content">
      
  
<nav id="TableOfContents">
  <ul>
    <li><a href="#中缀表达式">中缀表达式</a></li>
    <li><a href="#后缀表达式及其求值方法">后缀表达式及其求值方法</a>
      <ul>
        <li><a href="#后缀表达式的求值方法">后缀表达式的求值方法</a></li>
        <li><a href="#c-实现后缀表达式的求值">C++ 实现后缀表达式的求值</a></li>
        <li><a href="#c-实现后缀表达式的求值-1">C 实现后缀表达式的求值</a></li>
        <li><a href="#后缀表达式的转换方法中缀转后缀">后缀表达式的转换方法(中缀转后缀)</a></li>
        <li><a href="#c-实现中缀表达式转后缀表达式">C++ 实现中缀表达式转后缀表达式</a></li>
        <li><a href="#c-实现中缀表达式转后缀表达式-1">C 实现中缀表达式转后缀表达式</a></li>
      </ul>
    </li>
    <li><a href="#前缀表达式及其求值方法">前缀表达式及其求值方法</a>
      <ul>
        <li><a href="#前缀表达式的求值方法">前缀表达式的求值方法</a></li>
        <li><a href="#c-实现前缀表达式的求值">C++ 实现前缀表达式的求值</a></li>
        <li><a href="#c-实现前缀表达式的求值-1">C 实现前缀表达式的求值</a></li>
        <li><a href="#前缀表达式的转换方法中缀转前缀">前缀表达式的转换方法(中缀转前缀)</a></li>
        <li><a href="#c-实现中缀表达式转前缀表达式">C++ 实现中缀表达式转前缀表达式</a></li>
        <li><a href="#c-实现中缀表达式转前缀表达式-1">C 实现中缀表达式转前缀表达式</a></li>
      </ul>
    </li>
  </ul>
</nav>



    </div>
  </aside>
  
 
  </main>

  
</body>
</html>




















