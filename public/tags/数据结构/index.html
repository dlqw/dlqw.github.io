<!DOCTYPE html>
<html lang="en-us" dir="ltr">
<head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script>
  <!--
Made with Book Theme
https://github.com/alex-shpak/hugo-book
-->

<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="description" content="">
<meta name="theme-color" media="(prefers-color-scheme: light)" content="#ffffff">
<meta name="theme-color" media="(prefers-color-scheme: dark)" content="#343a40">
<meta name="color-scheme" content="light dark"><meta property="og:url" content="http://localhost:1313/tags/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/">
  <meta property="og:site_name" content="rdququ&#39;s Blog">
  <meta property="og:title" content="数据结构">
  <meta property="og:locale" content="en_us">
  <meta property="og:type" content="website">


  <meta itemprop="name" content="数据结构">
  <meta itemprop="datePublished" content="2023-10-23T00:00:00+00:00">
  <meta itemprop="dateModified" content="2023-10-23T00:00:00+00:00">

<title>数据结构 | rdququ&#39;s Blog</title>
<link rel="icon" href="/favicon.png" >
<link rel="manifest" href="/manifest.json">
<link rel="canonical" href="http://localhost:1313/tags/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/">
<link rel="stylesheet" href="/book.min.cc2c524ed250aac81b23d1f4af87344917b325208841feca0968fe450f570575.css" integrity="sha256-zCxSTtJQqsgbI9H0r4c0SRezJSCIQf7KCWj&#43;RQ9XBXU=" crossorigin="anonymous">


  <script defer src="/fuse.min.js"></script>
  <script defer src="/en.search.min.1cdae00495bbcc99219040905466ac17fee903495acba54776df72d26fbf3f62.js" integrity="sha256-HNrgBJW7zJkhkECQVGasF/7pA0lay6VHdt9y0m&#43;/P2I=" crossorigin="anonymous"></script>


<link rel="alternate" type="application/rss+xml" href="http://localhost:1313/tags/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/index.xml" title="rdququ's Blog" />

  
</head>
<body dir="ltr" class="book-kind-term book-type-tags">
  <input type="checkbox" class="hidden toggle" id="menu-control" />
  <input type="checkbox" class="hidden toggle" id="toc-control" />
  <main class="container flex">
    
<aside class="book-menu">
  <div class="book-menu-content">
    
  <nav>
<h2 class="book-brand">
  <a class="flex align-center" href="/"><span>rdququ&#39;s Blog</span>
  </a>
</h2>


<div class="book-search hidden">
  <input id="book-search-input" type="text" 
    placeholder="Search"
    aria-label="Search"
    maxlength="64" data-hotkeys="s/" />
  <div class="book-search-spinner hidden"></div>
  <ul id="book-search-results"></ul>
</div>
<script>document.querySelector(".book-search").classList.remove("hidden")</script>













  
  <ul>
    
      
        <li>
          
  
  

  
    <a href="/docs/blog/" class="">
      Blog</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/links/" class="">
      Links</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/archive/" class="">
      Archive</a>
  

        </li>
      
    
  </ul>













</nav>




  <script>(function(){var e=document.querySelector("aside .book-menu-content");addEventListener("beforeunload",function(){localStorage.setItem("menu.scrollTop",e.scrollTop)}),e.scrollTop=localStorage.getItem("menu.scrollTop")})()</script>



  </div>
</aside>
 

    <div class="book-page">
      <header class="book-header hidden">
        
  <div class="flex align-center justify-between">
  <label for="menu-control">
    <img src="/icons/menu.svg" class="book-icon" alt="Menu" />
  </label>

  <h3>数据结构</h3>

  <label for="toc-control">
    
  </label>
</div>


  
 
      </header>

      
      
  
  <article class="markdown book-post">
    <h2>
      <a href="/docs/archive_posts/prefix_infix_postfix_expr/">前缀、后缀，中缀表达式</a>
    </h2>
    
  <div class="flex align-center text-small book-post-date">
    <img src="/icons/calendar.svg" class="book-icon" alt="Calendar" />
    <span>October 23, 2023</span>
  </div>



  

  
  <div class="text-small">
    
      <a href="/tags/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/">数据结构</a>
  </div>
  


    <div class="book-post-content"><h2 id="中缀表达式">中缀表达式<a class="anchor" href="#%e4%b8%ad%e7%bc%80%e8%a1%a8%e8%be%be%e5%bc%8f">#</a></h2>
<p>中缀表达式就是我们通常所写的表达式,如:<code>1+2*3</code>、<code>1+(2+3)*4-5</code>、<code>1+2*(3+4*(5+6))</code> 等等。</p>
<h2 id="后缀表达式及其求值方法">后缀表达式及其求值方法<a class="anchor" href="#%e5%90%8e%e7%bc%80%e8%a1%a8%e8%be%be%e5%bc%8f%e5%8f%8a%e5%85%b6%e6%b1%82%e5%80%bc%e6%96%b9%e6%b3%95">#</a></h2>
<p>后缀表达式又称为逆波兰表达式,它的特点是运算符在操作数的后面,如:<code>123*+</code>、<code>123+4*+5-</code>、<code>123456+*+*+</code> 等等。</p>
<h3 id="后缀表达式的求值方法">后缀表达式的求值方法<a class="anchor" href="#%e5%90%8e%e7%bc%80%e8%a1%a8%e8%be%be%e5%bc%8f%e7%9a%84%e6%b1%82%e5%80%bc%e6%96%b9%e6%b3%95">#</a></h3>
<p>后缀表达式的求值方法是:从左到右遍历表达式的每个数字和符号,遇到是数字就进栈,遇到是符号,就将处于栈顶两个数字出栈,进行运算,运算结果进栈,一直到最终获得结果。</p>
<p>例如:<code>123*+</code> 的求值过程如下:</p>
<table>
  <thead>
      <tr>
          <th>读入字符</th>
          <th>当前栈</th>
          <th>说明</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td>1</td>
          <td>1</td>
          <td>读入 1,进栈</td>
      </tr>
      <tr>
          <td>2</td>
          <td>1 2</td>
          <td>读入 2,进栈</td>
      </tr>
      <tr>
          <td>3</td>
          <td>1 2 3</td>
          <td>读入 3,进栈</td>
      </tr>
      <tr>
          <td>*</td>
          <td>1 6</td>
          <td>读入 *,出栈 3 和 2,计算 2 * 3 = 6,将 6 进栈</td>
      </tr>
      <tr>
          <td>+</td>
          <td>7</td>
          <td>读入 +,出栈 6 和 1,计算 1 + 6 = 7,将 7 进栈</td>
      </tr>
  </tbody>
</table>
<h3 id="c-实现后缀表达式的求值">C++ 实现后缀表达式的求值<a class="anchor" href="#c-%e5%ae%9e%e7%8e%b0%e5%90%8e%e7%bc%80%e8%a1%a8%e8%be%be%e5%bc%8f%e7%9a%84%e6%b1%82%e5%80%bc">#</a></h3>
<p>用C++实现后缀表达式的求值。要求有简单的控制台UI,并且要对用户的危险行为进行检查和警告。控制台输出的语句要求是中英文对照,并且在用户进行错误操作的时候告知他进行了什么错误操作。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#75715e">#include</span> <span style="color:#75715e">&lt;iostream&gt;</span><span style="color:#75715e">
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">#include</span> <span style="color:#75715e">&lt;stack&gt;</span><span style="color:#75715e">
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">#include</span> <span style="color:#75715e">&lt;string&gt;</span><span style="color:#75715e">
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">#include</span> <span style="color:#75715e">&lt;sstream&gt;</span><span style="color:#75715e">
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">#include</span> <span style="color:#75715e">&lt;cctype&gt;</span><span style="color:#75715e">
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">using</span> <span style="color:#66d9ef">namespace</span> std;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// 函数声明
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">bool</span> <span style="color:#a6e22e">isOperator</span>(<span style="color:#66d9ef">char</span> c);
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">double</span> <span style="color:#a6e22e">performOperation</span>(<span style="color:#66d9ef">char</span> op, <span style="color:#66d9ef">double</span> operand1, <span style="color:#66d9ef">double</span> operand2);
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">bool</span> <span style="color:#a6e22e">evaluatePostfixExpression</span>(<span style="color:#66d9ef">const</span> string<span style="color:#f92672">&amp;</span> postfix, <span style="color:#66d9ef">double</span><span style="color:#f92672">&amp;</span> result);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">int</span> <span style="color:#a6e22e">main</span>() {
</span></span><span style="display:flex;"><span>    cout <span style="color:#f92672">&lt;&lt;</span> <span style="color:#e6db74">&#34;欢迎使用后缀表达式计算器!&#34;</span> <span style="color:#f92672">&lt;&lt;</span> endl;
</span></span><span style="display:flex;"><span>    cout <span style="color:#f92672">&lt;&lt;</span> <span style="color:#e6db74">&#34;请输入一个后缀表达式,使用空格分隔操作数和操作符,输入&#39;q&#39;退出:&#34;</span> <span style="color:#f92672">&lt;&lt;</span> endl;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">while</span> (true) {
</span></span><span style="display:flex;"><span>        string input;
</span></span><span style="display:flex;"><span>        getline(cin, input);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">if</span> (input <span style="color:#f92672">==</span> <span style="color:#e6db74">&#34;q&#34;</span>) {
</span></span><span style="display:flex;"><span>            cout <span style="color:#f92672">&lt;&lt;</span> <span style="color:#e6db74">&#34;感谢使用后缀表达式计算器,再见!&#34;</span> <span style="color:#f92672">&lt;&lt;</span> endl;
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">break</span>;
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">// 检查输入中的非法字符
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        <span style="color:#66d9ef">bool</span> validInput <span style="color:#f92672">=</span> true;
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">for</span> (<span style="color:#66d9ef">char</span> c : input) {
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">if</span> (<span style="color:#f92672">!</span>isspace(c) <span style="color:#f92672">&amp;&amp;</span> <span style="color:#f92672">!</span>isdigit(c) <span style="color:#f92672">&amp;&amp;</span> <span style="color:#f92672">!</span>isOperator(c)) {
</span></span><span style="display:flex;"><span>                validInput <span style="color:#f92672">=</span> false;
</span></span><span style="display:flex;"><span>                cout <span style="color:#f92672">&lt;&lt;</span> <span style="color:#e6db74">&#34;错误:输入包含非法字符 &#39;&#34;</span> <span style="color:#f92672">&lt;&lt;</span> c <span style="color:#f92672">&lt;&lt;</span> <span style="color:#e6db74">&#34;&#39;&#34;</span> <span style="color:#f92672">&lt;&lt;</span> endl;
</span></span><span style="display:flex;"><span>                <span style="color:#66d9ef">break</span>;
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">if</span> (validInput) {
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">double</span> result;
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">if</span> (evaluatePostfixExpression(input, result)) {
</span></span><span style="display:flex;"><span>                cout <span style="color:#f92672">&lt;&lt;</span> <span style="color:#e6db74">&#34;结果: &#34;</span> <span style="color:#f92672">&lt;&lt;</span> result <span style="color:#f92672">&lt;&lt;</span> endl;
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">else</span> {
</span></span><span style="display:flex;"><span>                cout <span style="color:#f92672">&lt;&lt;</span> <span style="color:#e6db74">&#34;错误:无效的后缀表达式&#34;</span> <span style="color:#f92672">&lt;&lt;</span> endl;
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        cout <span style="color:#f92672">&lt;&lt;</span> <span style="color:#e6db74">&#34;请输入另一个后缀表达式,或输入&#39;q&#39;退出:&#34;</span> <span style="color:#f92672">&lt;&lt;</span> endl;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> <span style="color:#ae81ff">0</span>;
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">bool</span> <span style="color:#a6e22e">isOperator</span>(<span style="color:#66d9ef">char</span> c) {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> c <span style="color:#f92672">==</span> <span style="color:#e6db74">&#39;+&#39;</span> <span style="color:#f92672">||</span> c <span style="color:#f92672">==</span> <span style="color:#e6db74">&#39;-&#39;</span> <span style="color:#f92672">||</span> c <span style="color:#f92672">==</span> <span style="color:#e6db74">&#39;*&#39;</span> <span style="color:#f92672">||</span> c <span style="color:#f92672">==</span> <span style="color:#e6db74">&#39;/&#39;</span>;
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">double</span> <span style="color:#a6e22e">performOperation</span>(<span style="color:#66d9ef">char</span> op, <span style="color:#66d9ef">double</span> operand1, <span style="color:#66d9ef">double</span> operand2) {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">switch</span> (op) {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">case</span> <span style="color:#e6db74">&#39;+&#39;</span><span style="color:#f92672">:</span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> operand1 <span style="color:#f92672">+</span> operand2;
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">case</span> <span style="color:#e6db74">&#39;-&#39;</span><span style="color:#f92672">:</span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> operand1 <span style="color:#f92672">-</span> operand2;
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">case</span> <span style="color:#e6db74">&#39;*&#39;</span><span style="color:#f92672">:</span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> operand1 <span style="color:#f92672">*</span> operand2;
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">case</span> <span style="color:#e6db74">&#39;/&#39;</span><span style="color:#f92672">:</span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">if</span> (operand2 <span style="color:#f92672">!=</span> <span style="color:#ae81ff">0</span>) {
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">return</span> operand1 <span style="color:#f92672">/</span> operand2;
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">else</span> {
</span></span><span style="display:flex;"><span>            cout <span style="color:#f92672">&lt;&lt;</span> <span style="color:#e6db74">&#34;错误:除数不能为零&#34;</span> <span style="color:#f92672">&lt;&lt;</span> endl;
</span></span><span style="display:flex;"><span>            exit(<span style="color:#ae81ff">1</span>);
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">default</span><span style="color:#f92672">:</span>
</span></span><span style="display:flex;"><span>        cout <span style="color:#f92672">&lt;&lt;</span> <span style="color:#e6db74">&#34;错误:未知的操作符 &#39;&#34;</span> <span style="color:#f92672">&lt;&lt;</span> op <span style="color:#f92672">&lt;&lt;</span> <span style="color:#e6db74">&#34;&#39;&#34;</span> <span style="color:#f92672">&lt;&lt;</span> endl;
</span></span><span style="display:flex;"><span>        exit(<span style="color:#ae81ff">1</span>);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">bool</span> <span style="color:#a6e22e">evaluatePostfixExpression</span>(<span style="color:#66d9ef">const</span> string<span style="color:#f92672">&amp;</span> postfix, <span style="color:#66d9ef">double</span><span style="color:#f92672">&amp;</span> result) {
</span></span><span style="display:flex;"><span>    stack<span style="color:#f92672">&lt;</span><span style="color:#66d9ef">double</span><span style="color:#f92672">&gt;</span> operandStack;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    istringstream iss(postfix);
</span></span><span style="display:flex;"><span>    string token;
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">while</span> (iss <span style="color:#f92672">&gt;&gt;</span> token) {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">if</span> (isdigit(token[<span style="color:#ae81ff">0</span>])) {
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">double</span> operand <span style="color:#f92672">=</span> stod(token);
</span></span><span style="display:flex;"><span>            operandStack.push(operand);
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">else</span> <span style="color:#66d9ef">if</span> (isOperator(token[<span style="color:#ae81ff">0</span>])) {
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">if</span> (operandStack.size() <span style="color:#f92672">&lt;</span> <span style="color:#ae81ff">2</span>) {
</span></span><span style="display:flex;"><span>                cout <span style="color:#f92672">&lt;&lt;</span> <span style="color:#e6db74">&#34;错误:操作数不足&#34;</span> <span style="color:#f92672">&lt;&lt;</span> endl;
</span></span><span style="display:flex;"><span>                <span style="color:#66d9ef">return</span> false;
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">double</span> operand2 <span style="color:#f92672">=</span> operandStack.top();
</span></span><span style="display:flex;"><span>            operandStack.pop();
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">double</span> operand1 <span style="color:#f92672">=</span> operandStack.top();
</span></span><span style="display:flex;"><span>            operandStack.pop();
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">double</span> result <span style="color:#f92672">=</span> performOperation(token[<span style="color:#ae81ff">0</span>], operand1, operand2);
</span></span><span style="display:flex;"><span>            operandStack.push(result);
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">else</span> {
</span></span><span style="display:flex;"><span>            cout <span style="color:#f92672">&lt;&lt;</span> <span style="color:#e6db74">&#34;错误:无效的标记 &#39;&#34;</span> <span style="color:#f92672">&lt;&lt;</span> token <span style="color:#f92672">&lt;&lt;</span> <span style="color:#e6db74">&#34;&#39;&#34;</span> <span style="color:#f92672">&lt;&lt;</span> endl;
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">return</span> false;
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">if</span> (operandStack.size() <span style="color:#f92672">==</span> <span style="color:#ae81ff">1</span>) {
</span></span><span style="display:flex;"><span>        result <span style="color:#f92672">=</span> operandStack.top();
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> true;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">else</span> {
</span></span><span style="display:flex;"><span>        cout <span style="color:#f92672">&lt;&lt;</span> <span style="color:#e6db74">&#34;错误:操作数不足或操作符过多&#34;</span> <span style="color:#f92672">&lt;&lt;</span> endl;
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> false;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div><h3 id="c-实现后缀表达式的求值-1">C 实现后缀表达式的求值<a class="anchor" href="#c-%e5%ae%9e%e7%8e%b0%e5%90%8e%e7%bc%80%e8%a1%a8%e8%be%be%e5%bc%8f%e7%9a%84%e6%b1%82%e5%80%bc-1">#</a></h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c" data-lang="c"><span style="display:flex;"><span><span style="color:#75715e">#include</span> <span style="color:#75715e">&lt;stdio.h&gt;</span><span style="color:#75715e">
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">#include</span> <span style="color:#75715e">&lt;stdlib.h&gt;</span><span style="color:#75715e">
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">#include</span> <span style="color:#75715e">&lt;string.h&gt;</span><span style="color:#75715e">
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">#include</span> <span style="color:#75715e">&lt;ctype.h&gt;</span><span style="color:#75715e">
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#define MAX_STACK_SIZE 100
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">#pragma warning(disable : 4996)
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// 栈结构和操作
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">typedef</span> <span style="color:#66d9ef">struct</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">double</span> data[MAX_STACK_SIZE];
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">int</span> top;
</span></span><span style="display:flex;"><span>} Stack;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">void</span> <span style="color:#a6e22e">initialize</span>(Stack<span style="color:#f92672">*</span> stack) {
</span></span><span style="display:flex;"><span>    stack<span style="color:#f92672">-&gt;</span>top <span style="color:#f92672">=</span> <span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>;
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">int</span> <span style="color:#a6e22e">isEmpty</span>(Stack<span style="color:#f92672">*</span> stack) {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> stack<span style="color:#f92672">-&gt;</span>top <span style="color:#f92672">==</span> <span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>;
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">void</span> <span style="color:#a6e22e">push</span>(Stack<span style="color:#f92672">*</span> stack, <span style="color:#66d9ef">double</span> value) {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">if</span> (stack<span style="color:#f92672">-&gt;</span>top <span style="color:#f92672">&lt;</span> MAX_STACK_SIZE <span style="color:#f92672">-</span> <span style="color:#ae81ff">1</span>) {
</span></span><span style="display:flex;"><span>        stack<span style="color:#f92672">-&gt;</span>data[<span style="color:#f92672">++</span>stack<span style="color:#f92672">-&gt;</span>top] <span style="color:#f92672">=</span> value;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">else</span> {
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">printf</span>(<span style="color:#e6db74">&#34;错误:栈已满</span><span style="color:#ae81ff">\n</span><span style="color:#e6db74">&#34;</span>);
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">exit</span>(<span style="color:#ae81ff">1</span>);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">double</span> <span style="color:#a6e22e">pop</span>(Stack<span style="color:#f92672">*</span> stack) {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">if</span> (<span style="color:#f92672">!</span><span style="color:#a6e22e">isEmpty</span>(stack)) {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> stack<span style="color:#f92672">-&gt;</span>data[stack<span style="color:#f92672">-&gt;</span>top<span style="color:#f92672">--</span>];
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">else</span> {
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">printf</span>(<span style="color:#e6db74">&#34;错误:栈为空</span><span style="color:#ae81ff">\n</span><span style="color:#e6db74">&#34;</span>);
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">exit</span>(<span style="color:#ae81ff">1</span>);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// 函数声明
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">int</span> <span style="color:#a6e22e">isOperator</span>(<span style="color:#66d9ef">char</span> c);
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">double</span> <span style="color:#a6e22e">performOperation</span>(<span style="color:#66d9ef">char</span> op, <span style="color:#66d9ef">double</span> operand1, <span style="color:#66d9ef">double</span> operand2);
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">int</span> <span style="color:#a6e22e">evaluatePostfixExpression</span>(<span style="color:#66d9ef">const</span> <span style="color:#66d9ef">char</span><span style="color:#f92672">*</span> postfix, <span style="color:#66d9ef">double</span><span style="color:#f92672">*</span> result);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">int</span> <span style="color:#a6e22e">main</span>() {
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">printf</span>(<span style="color:#e6db74">&#34;欢迎使用后缀表达式计算器!</span><span style="color:#ae81ff">\n</span><span style="color:#e6db74">&#34;</span>);
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">printf</span>(<span style="color:#e6db74">&#34;请输入一个后缀表达式,使用空格分隔操作数和操作符,输入&#39;q&#39;退出:</span><span style="color:#ae81ff">\n</span><span style="color:#e6db74">&#34;</span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">while</span> (<span style="color:#ae81ff">1</span>) {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">char</span> input[<span style="color:#ae81ff">100</span>];
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">fgets</span>(input, <span style="color:#66d9ef">sizeof</span>(input), stdin);
</span></span><span style="display:flex;"><span>        input[<span style="color:#a6e22e">strcspn</span>(input, <span style="color:#e6db74">&#34;</span><span style="color:#ae81ff">\n</span><span style="color:#e6db74">&#34;</span>)] <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;\0&#39;</span>; <span style="color:#75715e">// 去掉换行符
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">if</span> (<span style="color:#a6e22e">strcmp</span>(input, <span style="color:#e6db74">&#34;q&#34;</span>) <span style="color:#f92672">==</span> <span style="color:#ae81ff">0</span>) {
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">printf</span>(<span style="color:#e6db74">&#34;感谢使用后缀表达式计算器,再见!</span><span style="color:#ae81ff">\n</span><span style="color:#e6db74">&#34;</span>);
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">break</span>;
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">// 检查输入中的非法字符
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        <span style="color:#66d9ef">int</span> validInput <span style="color:#f92672">=</span> <span style="color:#ae81ff">1</span>;
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">for</span> (<span style="color:#66d9ef">int</span> i <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>; input[i] <span style="color:#f92672">!=</span> <span style="color:#e6db74">&#39;\0&#39;</span>; i<span style="color:#f92672">++</span>) {
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">if</span> (<span style="color:#f92672">!</span><span style="color:#a6e22e">isspace</span>(input[i]) <span style="color:#f92672">&amp;&amp;</span> <span style="color:#f92672">!</span><span style="color:#a6e22e">isdigit</span>(input[i]) <span style="color:#f92672">&amp;&amp;</span> <span style="color:#f92672">!</span><span style="color:#a6e22e">isOperator</span>(input[i])) {
</span></span><span style="display:flex;"><span>                validInput <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>;
</span></span><span style="display:flex;"><span>                <span style="color:#a6e22e">printf</span>(<span style="color:#e6db74">&#34;错误:输入包含非法字符 &#39;%c&#39;</span><span style="color:#ae81ff">\n</span><span style="color:#e6db74">&#34;</span>, input[i]);
</span></span><span style="display:flex;"><span>                <span style="color:#66d9ef">break</span>;
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">if</span> (validInput) {
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">double</span> result;
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">if</span> (<span style="color:#a6e22e">evaluatePostfixExpression</span>(input, <span style="color:#f92672">&amp;</span>result)) {
</span></span><span style="display:flex;"><span>                <span style="color:#a6e22e">printf</span>(<span style="color:#e6db74">&#34;结果: %g</span><span style="color:#ae81ff">\n</span><span style="color:#e6db74">&#34;</span>, result);
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">else</span> {
</span></span><span style="display:flex;"><span>                <span style="color:#a6e22e">printf</span>(<span style="color:#e6db74">&#34;错误:无效的后缀表达式</span><span style="color:#ae81ff">\n</span><span style="color:#e6db74">&#34;</span>);
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">printf</span>(<span style="color:#e6db74">&#34;请输入另一个后缀表达式,或输入&#39;q&#39;退出:</span><span style="color:#ae81ff">\n</span><span style="color:#e6db74">&#34;</span>);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> <span style="color:#ae81ff">0</span>;
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">int</span> <span style="color:#a6e22e">isOperator</span>(<span style="color:#66d9ef">char</span> c) {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> c <span style="color:#f92672">==</span> <span style="color:#e6db74">&#39;+&#39;</span> <span style="color:#f92672">||</span> c <span style="color:#f92672">==</span> <span style="color:#e6db74">&#39;-&#39;</span> <span style="color:#f92672">||</span> c <span style="color:#f92672">==</span> <span style="color:#e6db74">&#39;*&#39;</span> <span style="color:#f92672">||</span> c <span style="color:#f92672">==</span> <span style="color:#e6db74">&#39;/&#39;</span>;
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">double</span> <span style="color:#a6e22e">performOperation</span>(<span style="color:#66d9ef">char</span> op, <span style="color:#66d9ef">double</span> operand1, <span style="color:#66d9ef">double</span> operand2) {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">switch</span> (op) {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">case</span> <span style="color:#e6db74">&#39;+&#39;</span><span style="color:#f92672">:</span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> operand1 <span style="color:#f92672">+</span> operand2;
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">case</span> <span style="color:#e6db74">&#39;-&#39;</span><span style="color:#f92672">:</span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> operand1 <span style="color:#f92672">-</span> operand2;
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">case</span> <span style="color:#e6db74">&#39;*&#39;</span><span style="color:#f92672">:</span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> operand1 <span style="color:#f92672">*</span> operand2;
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">case</span> <span style="color:#e6db74">&#39;/&#39;</span><span style="color:#f92672">:</span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">if</span> (operand2 <span style="color:#f92672">!=</span> <span style="color:#ae81ff">0</span>) {
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">return</span> operand1 <span style="color:#f92672">/</span> operand2;
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">else</span> {
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">printf</span>(<span style="color:#e6db74">&#34;错误:除数不能为零</span><span style="color:#ae81ff">\n</span><span style="color:#e6db74">&#34;</span>);
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">exit</span>(<span style="color:#ae81ff">1</span>);
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">default</span><span style="color:#f92672">:</span>
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">printf</span>(<span style="color:#e6db74">&#34;错误:未知的操作符 &#39;%c&#39;</span><span style="color:#ae81ff">\n</span><span style="color:#e6db74">&#34;</span>, op);
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">exit</span>(<span style="color:#ae81ff">1</span>);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">int</span> <span style="color:#a6e22e">evaluatePostfixExpression</span>(<span style="color:#66d9ef">const</span> <span style="color:#66d9ef">char</span><span style="color:#f92672">*</span> postfix, <span style="color:#66d9ef">double</span><span style="color:#f92672">*</span> result) {
</span></span><span style="display:flex;"><span>    Stack operandStack;
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">initialize</span>(<span style="color:#f92672">&amp;</span>operandStack);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">char</span><span style="color:#f92672">*</span> token <span style="color:#f92672">=</span> <span style="color:#a6e22e">strtok</span>((<span style="color:#66d9ef">char</span><span style="color:#f92672">*</span>)postfix, <span style="color:#e6db74">&#34; &#34;</span>);
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">while</span> (token <span style="color:#f92672">!=</span> NULL) {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">if</span> (<span style="color:#a6e22e">isdigit</span>(token[<span style="color:#ae81ff">0</span>])) {
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">double</span> operand <span style="color:#f92672">=</span> <span style="color:#a6e22e">atof</span>(token);
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">push</span>(<span style="color:#f92672">&amp;</span>operandStack, operand);
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">else</span> <span style="color:#66d9ef">if</span> (<span style="color:#a6e22e">isOperator</span>(token[<span style="color:#ae81ff">0</span>])) {
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">if</span> (operandStack.top <span style="color:#f92672">&lt;</span> <span style="color:#ae81ff">1</span>) {
</span></span><span style="display:flex;"><span>                <span style="color:#a6e22e">printf</span>(<span style="color:#e6db74">&#34;错误:操作数不足</span><span style="color:#ae81ff">\n</span><span style="color:#e6db74">&#34;</span>);
</span></span><span style="display:flex;"><span>                <span style="color:#66d9ef">return</span> <span style="color:#ae81ff">0</span>;
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">double</span> operand2 <span style="color:#f92672">=</span> <span style="color:#a6e22e">pop</span>(<span style="color:#f92672">&amp;</span>operandStack);
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">double</span> operand1 <span style="color:#f92672">=</span> <span style="color:#a6e22e">pop</span>(<span style="color:#f92672">&amp;</span>operandStack);
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">double</span> result <span style="color:#f92672">=</span> <span style="color:#a6e22e">performOperation</span>(token[<span style="color:#ae81ff">0</span>], operand1, operand2);
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">push</span>(<span style="color:#f92672">&amp;</span>operandStack, result);
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">else</span> {
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">printf</span>(<span style="color:#e6db74">&#34;错误:无效的标记 &#39;%s&#39;</span><span style="color:#ae81ff">\n</span><span style="color:#e6db74">&#34;</span>, token);
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">return</span> <span style="color:#ae81ff">0</span>;
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        token <span style="color:#f92672">=</span> <span style="color:#a6e22e">strtok</span>(NULL, <span style="color:#e6db74">&#34; &#34;</span>);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">if</span> (operandStack.top <span style="color:#f92672">==</span> <span style="color:#ae81ff">0</span>) {
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">*</span>result <span style="color:#f92672">=</span> operandStack.data[<span style="color:#ae81ff">0</span>];
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> <span style="color:#ae81ff">1</span>;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">else</span> {
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">printf</span>(<span style="color:#e6db74">&#34;错误:操作数不足或操作符过多</span><span style="color:#ae81ff">\n</span><span style="color:#e6db74">&#34;</span>);
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> <span style="color:#ae81ff">0</span>;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div><h3 id="后缀表达式的转换方法中缀转后缀">后缀表达式的转换方法(中缀转后缀)<a class="anchor" href="#%e5%90%8e%e7%bc%80%e8%a1%a8%e8%be%be%e5%bc%8f%e7%9a%84%e8%bd%ac%e6%8d%a2%e6%96%b9%e6%b3%95%e4%b8%ad%e7%bc%80%e8%bd%ac%e5%90%8e%e7%bc%80">#</a></h3>
<p>将中缀表达式转换为后缀表达式的方法是:从左到右遍历中缀表达式的每个数字和符号,若是数字就输出,若是符号,则判断其与栈顶符号的优先级,是右括号或优先级不高于栈顶符号(乘除优先加减)则栈顶元素依次出栈并输出,并将当前符号进栈,一直到最终输出后缀表达式为止。</p></div>
  </article>
  

  
 
      

      <footer class="book-footer">
        
  <div class="flex flex-wrap justify-between">

<div>

</div>

<div>

</div>

</div>





  
  
  


 
        
  
 
        
        
  
 
        
  
  
    <script>(function(){document.querySelectorAll("pre:has(code)").forEach(e=>{e.addEventListener("click",e.focus),e.addEventListener("copy",function(t){if(t.preventDefault(),navigator.clipboard){const t=window.getSelection().toString()||e.textContent;navigator.clipboard.writeText(t)}})})})()</script>
  

      </footer>

      <label for="menu-control" class="hidden book-menu-overlay"></label>
    </div>

    
<aside class="book-toc">
  <div class="book-toc-content">
    
  <nav>
  <ul>
  
    
    <li class="book-section-flat">
      <a>Categories</a>
      <ul>
      
      </ul>
    </li>
    
  
    
    <li class="book-section-flat">
      <a>Tags</a>
      <ul>
      
        <li class="flex align-center">
          <a href="/tags/c%23/">C#</a>
          <span>1</span>
        </li>
      
        <li class="flex align-center">
          <a href="/tags/fp/">FP</a>
          <span>1</span>
        </li>
      
        <li class="flex align-center">
          <a href="/tags/eventbus/">EventBus</a>
          <span>1</span>
        </li>
      
        <li class="flex align-center">
          <a href="/tags/unity/">Unity</a>
          <span>1</span>
        </li>
      
        <li class="flex align-center">
          <a href="/tags/%E5%8F%91%E5%B8%83%E8%AE%A2%E9%98%85/">发布订阅</a>
          <span>1</span>
        </li>
      
        <li class="flex align-center">
          <a href="/tags/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/">设计模式</a>
          <span>2</span>
        </li>
      
        <li class="flex align-center">
          <a href="/tags/oop/">OOP</a>
          <span>1</span>
        </li>
      
        <li class="flex align-center">
          <a href="/tags/solid/">SOLID</a>
          <span>1</span>
        </li>
      
        <li class="flex align-center">
          <a href="/tags/%E8%AE%BE%E8%AE%A1%E5%8E%9F%E5%88%99/">设计原则</a>
          <span>1</span>
        </li>
      
        <li class="flex align-center">
          <a href="/tags/%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1/">面向对象</a>
          <span>1</span>
        </li>
      
        <li class="flex align-center">
          <a href="/tags/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/">数据结构</a>
          <span>1</span>
        </li>
      
        <li class="flex align-center">
          <a href="/tags/game-engine/">Game Engine</a>
          <span>1</span>
        </li>
      
        <li class="flex align-center">
          <a href="/tags/render/">Render</a>
          <span>1</span>
        </li>
      
      </ul>
    </li>
    
  
  </ul>
</nav>


  </div>
</aside>
 
  </main>

  
</body>
</html>




















